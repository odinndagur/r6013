(function(){"use strict";function jt(y){if(y.__esModule)return y;var l=y.default;if(typeof l=="function"){var c=function u(){if(this instanceof u){var f=[null];f.push.apply(f,arguments);var h=Function.bind.apply(l,f);return new h}return l.apply(this,arguments)};c.prototype=l.prototype}else c={};return Object.defineProperty(c,"__esModule",{value:!0}),Object.keys(y).forEach(function(u){var f=Object.getOwnPropertyDescriptor(y,u);Object.defineProperty(c,u,f.get?f:{enumerable:!0,get:function(){return y[u]}})}),c}var $e={},Ct={get exports(){return $e},set exports(y){$e=y}},$t={},Vt=Object.freeze({__proto__:null,default:$t}),ge=jt(Vt);(function(y,l){var c=void 0,u=function(f){return c||(c=new Promise(function(h,m){var o=typeof f<"u"?f:{},g=o.onAbort;o.onAbort=function(e){m(new Error(e)),g&&g(e)},o.postRun=o.postRun||[],o.postRun.push(function(){h(o)}),y=void 0;var o;o||(o=typeof o<"u"?o:{}),o.onRuntimeInitialized=function(){function e(d,b){this.Qa=d,this.db=b,this.Pa=1,this.wb=[]}function t(d,b){if(this.db=b,b=ce(d)+1,this.hb=Ie(b),this.hb===null)throw Error("Unable to allocate memory for the SQL string");ne(d,H,this.hb,b),this.sb=this.hb,this.eb=this.Mb=null}function r(d,{filename:b=!1}={}){b===!1?(this.filename="dbfile_"+(4294967295*Math.random()>>>0),this.Yc=!0,d!=null&&n.zb("/",this.filename,d,!0,!0)):this.filename=d,this.handleError(a(this.filename,i)),this.db=te(i,"i32"),$r(this.db),this.nb={},this.Xa={}}var i=se(4),s=o.cwrap,a=s("sqlite3_open","number",["string","number"]),p=s("sqlite3_close_v2","number",["number"]),_=s("sqlite3_exec","number",["number","string","number","number","number"]),v=s("sqlite3_changes","number",["number"]),w=s("sqlite3_prepare_v2","number",["number","string","number","number","number"]),S=s("sqlite3_sql","string",["number"]),O=s("sqlite3_normalized_sql","string",["number"]),T=s("sqlite3_prepare_v2","number",["number","number","number","number","number"]),I=s("sqlite3_bind_text","number",["number","number","number","number","number"]),z=s("sqlite3_bind_blob","number",["number","number","number","number","number"]),V=s("sqlite3_bind_double","number",["number","number","number"]),pe=s("sqlite3_bind_int","number",["number","number","number"]),le=s("sqlite3_bind_parameter_index","number",["number","string"]),ft=s("sqlite3_step","number",["number"]),j=s("sqlite3_errmsg","string",["number"]),Sr=s("sqlite3_column_count","number",["number"]),qr=s("sqlite3_data_count","number",["number"]),Ar=s("sqlite3_column_double","number",["number","number"]),Bt=s("sqlite3_column_text","string",["number","number"]),Dr=s("sqlite3_column_blob","number",["number","number"]),Nr=s("sqlite3_column_bytes","number",["number","number"]),Fr=s("sqlite3_column_type","number",["number","number"]),xr=s("sqlite3_column_name","string",["number","number"]),Or=s("sqlite3_reset","number",["number"]),Rr=s("sqlite3_clear_bindings","number",["number"]),Mr=s("sqlite3_finalize","number",["number"]),Pr=s("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),zr=s("sqlite3_value_type","number",["number"]),Tr=s("sqlite3_value_bytes","number",["number"]),Lr=s("sqlite3_value_text","string",["number"]),Br=s("sqlite3_value_blob","number",["number"]),Wr=s("sqlite3_value_double","number",["number"]),Ur=s("sqlite3_result_double","",["number","number"]),Wt=s("sqlite3_result_null","",["number"]),Ir=s("sqlite3_result_text","",["number","string","number","number"]),jr=s("sqlite3_result_blob","",["number","number","number","number"]),Cr=s("sqlite3_result_int","",["number","number"]),Ut=s("sqlite3_result_error","",["number","string","number"]),$r=s("RegisterExtensionFunctions","number",["number"]);e.prototype.bind=function(d){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(d)?this.yc(d):d!=null&&typeof d=="object"?this.zc(d):!0},e.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Pa=1;var d=ft(this.Qa);switch(d){case 100:return!0;case 101:return!1;default:throw this.db.handleError(d)}},e.prototype.ec=function(d){return d==null&&(d=this.Pa,this.Pa+=1),Ar(this.Qa,d)},e.prototype.Pc=function(d){if(d==null&&(d=this.Pa,this.Pa+=1),d=Bt(this.Qa,d),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(d)},e.prototype.Rc=function(d){return d==null&&(d=this.Pa,this.Pa+=1),Bt(this.Qa,d)},e.prototype.getBlob=function(d){d==null&&(d=this.Pa,this.Pa+=1);var b=Nr(this.Qa,d);d=Dr(this.Qa,d);for(var N=new Uint8Array(b),F=0;F<b;F+=1)N[F]=W[d+F];return N},e.prototype.get=function(d,b){b=b||{},d!=null&&this.bind(d)&&this.step(),d=[];for(var N=qr(this.Qa),F=0;F<N;F+=1)switch(Fr(this.Qa,F)){case 1:var R=b.useBigInt?this.Pc(F):this.ec(F);d.push(R);break;case 2:d.push(this.ec(F));break;case 3:d.push(this.Rc(F));break;case 4:d.push(this.getBlob(F));break;default:d.push(null)}return d},e.prototype.getColumnNames=function(){for(var d=[],b=Sr(this.Qa),N=0;N<b;N+=1)d.push(xr(this.Qa,N));return d},e.prototype.getAsObject=function(d,b){d=this.get(d,b),b=this.getColumnNames();for(var N={},F=0;F<b.length;F+=1)N[b[F]]=d[F];return N},e.prototype.getSQL=function(){return S(this.Qa)},e.prototype.getNormalizedSQL=function(){return O(this.Qa)},e.prototype.run=function(d){return d!=null&&this.bind(d),this.step(),this.reset()},e.prototype.Ub=function(d,b){b==null&&(b=this.Pa,this.Pa+=1),d=Ue(d);var N=Ze(d);this.wb.push(N),this.db.handleError(I(this.Qa,b,N,d.length-1,0))},e.prototype.xc=function(d,b){b==null&&(b=this.Pa,this.Pa+=1);var N=Ze(d);this.wb.push(N),this.db.handleError(z(this.Qa,b,N,d.length,0))},e.prototype.Tb=function(d,b){b==null&&(b=this.Pa,this.Pa+=1),this.db.handleError((d===(d|0)?pe:V)(this.Qa,b,d))},e.prototype.Ac=function(d){d==null&&(d=this.Pa,this.Pa+=1),z(this.Qa,d,0,0,0)},e.prototype.Vb=function(d,b){switch(b==null&&(b=this.Pa,this.Pa+=1),typeof d){case"string":this.Ub(d,b);return;case"number":this.Tb(d,b);return;case"bigint":this.Ub(d.toString(),b);return;case"boolean":this.Tb(d+0,b);return;case"object":if(d===null){this.Ac(b);return}if(d.length!=null){this.xc(d,b);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+d+")."},e.prototype.zc=function(d){var b=this;return Object.keys(d).forEach(function(N){var F=le(b.Qa,N);F!==0&&b.Vb(d[N],F)}),!0},e.prototype.yc=function(d){for(var b=0;b<d.length;b+=1)this.Vb(d[b],b+1);return!0},e.prototype.reset=function(){return this.freemem(),Rr(this.Qa)===0&&Or(this.Qa)===0},e.prototype.freemem=function(){for(var d;(d=this.wb.pop())!==void 0;)Ne(d)},e.prototype.free=function(){this.freemem();var d=Mr(this.Qa)===0;return delete this.db.nb[this.Qa],this.Qa=0,d},t.prototype.next=function(){if(this.hb===null)return{done:!0};if(this.eb!==null&&(this.eb.free(),this.eb=null),!this.db.db)throw this.Bb(),Error("Database closed");var d=Fe(),b=se(4);Ae(i),Ae(b);try{this.db.handleError(T(this.db.db,this.sb,-1,i,b)),this.sb=te(b,"i32");var N=te(i,"i32");return N===0?(this.Bb(),{done:!0}):(this.eb=new e(N,this.db),this.db.nb[N]=this.eb,{value:this.eb,done:!1})}catch(F){throw this.Mb=B(this.sb),this.Bb(),F}finally{xe(d)}},t.prototype.Bb=function(){Ne(this.hb),this.hb=null},t.prototype.getRemainingSQL=function(){return this.Mb!==null?this.Mb:B(this.sb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(t.prototype[Symbol.iterator]=function(){return this}),r.prototype.run=function(d,b){if(!this.db)throw"Database closed";if(b){d=this.prepare(d,b);try{d.step()}finally{d.free()}}else this.handleError(_(this.db,d,0,0,i));return this},r.prototype.exec=function(d,b,N){if(!this.db)throw"Database closed";var F=Fe(),R=null;try{var C=ce(d)+1,Q=se(C);ne(d,W,Q,C);var Se=Q,me=se(4);for(d=[];te(Se,"i8")!==0;){Ae(i),Ae(me),this.handleError(T(this.db,Se,-1,i,me));var $=te(i,"i32");if(Se=te(me,"i32"),$!==0){for(C=null,R=new e($,this),b!=null&&R.bind(b);R.step();)C===null&&(C={columns:R.getColumnNames(),values:[]},d.push(C)),C.values.push(R.get(null,N));R.free()}}return d}catch(J){throw R&&R.free(),J}finally{xe(F)}},r.prototype.each=function(d,b,N,F,R){typeof b=="function"&&(F=N,N=b,b=void 0),d=this.prepare(d,b);try{for(;d.step();)N(d.getAsObject(null,R))}finally{d.free()}if(typeof F=="function")return F()},r.prototype.prepare=function(d,b){if(Ae(i),this.handleError(w(this.db,d,-1,i,0)),d=te(i,"i32"),d===0)throw"Nothing to prepare";var N=new e(d,this);return b!=null&&N.bind(b),this.nb[d]=N},r.prototype.iterateStatements=function(d){return new t(d,this)},r.prototype.export=function(){Object.values(this.nb).forEach(function(b){b.free()}),Object.values(this.Xa).forEach(He),this.Xa={},this.handleError(p(this.db));var d=n.readFile(this.filename,{encoding:"binary"});return this.handleError(a(this.filename,i)),this.db=te(i,"i32"),d},r.prototype.close=function(){this.db!==null&&(Object.values(this.nb).forEach(function(d){d.free()}),Object.values(this.Xa).forEach(He),this.Xa={},this.handleError(p(this.db)),this.Yc&&n.unlink("/"+this.filename),this.db=null)},r.prototype.handleError=function(d){if(d===0)return null;throw d=j(this.db),Error(d)},r.prototype.getRowsModified=function(){return v(this.db)},r.prototype.create_function=function(d,b){Object.prototype.hasOwnProperty.call(this.Xa,d)&&(He(this.Xa[d]),delete this.Xa[d]);var N=Pe(function(F,R,C){for(var Q,Se=[],me=0;me<R;me+=1){var $=te(C+4*me,"i32"),J=zr($);if(J===1||J===2)$=Wr($);else if(J===3)$=Lr($);else if(J===4){J=$,$=Tr(J),J=Br(J);for(var It=new Uint8Array($),Ce=0;Ce<$;Ce+=1)It[Ce]=W[J+Ce];$=It}else $=null;Se.push($)}try{Q=b.apply(null,Se)}catch(Vr){Ut(F,Vr,-1);return}switch(typeof Q){case"boolean":Cr(F,Q?1:0);break;case"number":Ur(F,Q);break;case"string":Ir(F,Q,-1,-1);break;case"object":Q===null?Wt(F):Q.length!=null?(R=Ze(Q),jr(F,R,Q.length,-1),Ne(R)):Ut(F,"Wrong API use : tried to return a value of an unknown type ("+Q+").",-1);break;default:Wt(F)}},"viii");return this.Xa[d]=N,this.handleError(Pr(this.db,d,b.length,1,0,N,0,0,0)),this},o.Database=r;var Oe=new Map;o.register_for_idb=d=>{let b=Pe(function(R,C){return R=Oe.get(R),d.lock(R,C)?0:5},"iii"),N=Pe(function(R,C){return R=Oe.get(R),d.unlock(R,C),0},"iii"),F=Pe(function(R,C){R=B(R),Oe.set(C,R)},"vii");o._register_for_idb(b,N,F)},o.cleanup_file=d=>{let b=[...Oe.entries()].find(N=>N[1]===d);Oe.delete(b[0])},o.reset_filesystem=()=>{n.root=null,n.oc()}};var k={},A;for(A in o)o.hasOwnProperty(A)&&(k[A]=o[A]);var q="./this.program",M=typeof window=="object",L=typeof importScripts=="function",ee=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Z="",_e,ue,we,re,be;ee?(Z=L?ge.dirname(Z)+"/":__dirname+"/",_e=function(e,t){return re||(re=ge),be||(be=ge),e=be.normalize(e),re.readFileSync(e,t?null:"utf8")},we=function(e){return e=_e(e,!0),e.buffer||(e=new Uint8Array(e)),Ye(e.buffer),e},ue=function(e,t,r){re||(re=ge),be||(be=ge),e=be.normalize(e),re.readFile(e,function(i,s){i?r(i):t(s.buffer)})},1<process.argv.length&&(q=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),y.exports=o,o.inspect=function(){return"[Emscripten Module object]"}):(M||L)&&(L?Z=self.location.href:typeof document<"u"&&document.currentScript&&(Z=document.currentScript.src),Z=Z.indexOf("blob:")!==0?Z.substr(0,Z.lastIndexOf("/")+1):"",_e=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},L&&(we=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ue=function(e,t,r){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){i.status==200||i.status==0&&i.response?t(i.response):r()},i.onerror=r,i.send(null)});var Me=o.print||console.log.bind(console),U=o.printErr||console.warn.bind(console);for(A in k)k.hasOwnProperty(A)&&(o[A]=k[A]);k=null,o.thisProgram&&(q=o.thisProgram);var Qe=[],fe;function He(e){fe.delete(G.get(e)),Qe.push(e)}function Pe(e,t){if(!fe){fe=new WeakMap;for(var r=0;r<G.length;r++){var i=G.get(r);i&&fe.set(i,r)}}if(fe.has(e))e=fe.get(e);else{if(Qe.length)r=Qe.pop();else{try{G.grow(1)}catch(_){throw _ instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":_}r=G.length-1}try{G.set(r,e)}catch(_){if(!(_ instanceof TypeError))throw _;if(typeof WebAssembly.Function=="function"){var s={i:"i32",j:"i64",f:"f32",d:"f64"},a={parameters:[],results:t[0]=="v"?[]:[s[t[0]]]};for(i=1;i<t.length;++i)a.parameters.push(s[t[i]]);t=new WebAssembly.Function(a,e)}else{s=[1,0,1,96],a=t.slice(0,1),t=t.slice(1);var p={i:127,j:126,f:125,d:124};for(s.push(t.length),i=0;i<t.length;++i)s.push(p[t[i]]);a=="v"?s.push(0):s=s.concat([1,p[a]]),s[1]=s.length-2,t=new Uint8Array([0,97,115,109,1,0,0,0].concat(s,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),t=new WebAssembly.Module(t),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}G.set(r,t)}fe.set(e,r),e=r}return e}var qe;o.wasmBinary&&(qe=o.wasmBinary),o.noExitRuntime,typeof WebAssembly!="object"&&x("no native wasm support detected");function Ae(e){var t="i32";switch(t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":W[e>>0]=0;break;case"i8":W[e>>0]=0;break;case"i16":ze[e>>1]=0;break;case"i32":E[e>>2]=0;break;case"i64":Y=[0,(P=0,1<=+Math.abs(P)?0<P?(Math.min(+Math.floor(P/4294967296),4294967295)|0)>>>0:~~+Math.ceil((P-+(~~P>>>0))/4294967296)>>>0:0)],E[e>>2]=Y[0],E[e+4>>2]=Y[1];break;case"float":Ge[e>>2]=0;break;case"double":Ke[e>>3]=0;break;default:x("invalid type for setValue: "+t)}}function te(e,t){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return W[e>>0];case"i8":return W[e>>0];case"i16":return ze[e>>1];case"i32":return E[e>>2];case"i64":return E[e>>2];case"float":return Ge[e>>2];case"double":return Ke[e>>3];default:x("invalid type for getValue: "+t)}return null}var Xe,_t=!1;function Ye(e,t){e||x("Assertion failed: "+t)}function wt(e){var t=o["_"+e];return Ye(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function dr(e,t,r,i){var s={string:function(w){var S=0;if(w!=null&&w!==0){var O=(w.length<<2)+1;S=se(O),ne(w,H,S,O)}return S},array:function(w){var S=se(w.length);return W.set(w,S),S}};e=wt(e);var a=[],p=0;if(i)for(var _=0;_<i.length;_++){var v=s[r[_]];v?(p===0&&(p=Fe()),a[_]=v(i[_])):a[_]=i[_]}return r=e.apply(null,a),r=function(w){return p!==0&&xe(p),t==="string"?B(w):t==="boolean"?!!w:w}(r)}function Ze(e){var t=Ie(e.length);return e.subarray||e.slice?H.set(e,t):H.set(new Uint8Array(e),t),t}var bt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ye(e,t,r){var i=t+r;for(r=t;e[r]&&!(r>=i);)++r;if(16<r-t&&e.subarray&&bt)return bt.decode(e.subarray(t,r));for(i="";t<r;){var s=e[t++];if(s&128){var a=e[t++]&63;if((s&224)==192)i+=String.fromCharCode((s&31)<<6|a);else{var p=e[t++]&63;s=(s&240)==224?(s&15)<<12|a<<6|p:(s&7)<<18|a<<12|p<<6|e[t++]&63,65536>s?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296|s>>10,56320|s&1023))}}else i+=String.fromCharCode(s)}return i}function B(e,t){return e?ye(H,e,t):""}function ne(e,t,r,i){if(!(0<i))return 0;var s=r;i=r+i-1;for(var a=0;a<e.length;++a){var p=e.charCodeAt(a);if(55296<=p&&57343>=p){var _=e.charCodeAt(++a);p=65536+((p&1023)<<10)|_&1023}if(127>=p){if(r>=i)break;t[r++]=p}else{if(2047>=p){if(r+1>=i)break;t[r++]=192|p>>6}else{if(65535>=p){if(r+2>=i)break;t[r++]=224|p>>12}else{if(r+3>=i)break;t[r++]=240|p>>18,t[r++]=128|p>>12&63}t[r++]=128|p>>6&63}t[r++]=128|p&63}}return t[r]=0,r-s}function ce(e){for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);55296<=i&&57343>=i&&(i=65536+((i&1023)<<10)|e.charCodeAt(++r)&1023),127>=i?++t:t=2047>=i?t+2:65535>=i?t+3:t+4}return t}function yt(e){var t=ce(e)+1,r=Ie(t);return r&&ne(e,W,r,t),r}var Je,W,H,ze,E,Ge,Ke;function Et(){var e=Xe.buffer;Je=e,o.HEAP8=W=new Int8Array(e),o.HEAP16=ze=new Int16Array(e),o.HEAP32=E=new Int32Array(e),o.HEAPU8=H=new Uint8Array(e),o.HEAPU16=new Uint16Array(e),o.HEAPU32=new Uint32Array(e),o.HEAPF32=Ge=new Float32Array(e),o.HEAPF64=Ke=new Float64Array(e)}var G,vt=[],kt=[],St=[];function hr(){var e=o.preRun.shift();vt.unshift(e)}var de=0,De=null;function et(){de++,o.monitorRunDependencies&&o.monitorRunDependencies(de)}function Te(){if(de--,o.monitorRunDependencies&&o.monitorRunDependencies(de),de==0&&De){var e=De;De=null,e()}}o.preloadedImages={},o.preloadedAudios={};function x(e){throw o.onAbort&&o.onAbort(e),U(e),_t=!0,new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info.")}function qt(){return X.startsWith("data:application/octet-stream;base64,")}var X;if(X="sql-wasm.wasm",!qt()){var At=X;X=o.locateFile?o.locateFile(At,Z):Z+At}function Dt(){var e=X;try{if(e==X&&qe)return new Uint8Array(qe);if(we)return we(e);throw"both async and sync fetching of the wasm failed"}catch(t){x(t)}}function pr(){if(!qe&&(M||L)){if(typeof fetch=="function"&&!X.startsWith("file://"))return fetch(X,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+X+"'";return e.arrayBuffer()}).catch(function(){return Dt()});if(ue)return new Promise(function(e,t){ue(X,function(r){e(new Uint8Array(r))},t)})}return Promise.resolve().then(function(){return Dt()})}var P,Y;function tt(e){for(;0<e.length;){var t=e.shift();if(typeof t=="function")t(o);else{var r=t.qd;typeof r=="number"?t.yb===void 0?G.get(r)():G.get(r)(t.yb):r(t.yb===void 0?null:t.yb)}}}function mr(e){return e.replace(/\b_Z[\w\d_]+/g,function(t){return t===t?t:t+" ["+t+"]"})}function gr(){function e(p){return(p=p.toTimeString().match(/\(([A-Za-z ]+)\)$/))?p[1]:"GMT"}var t=new Date().getFullYear(),r=new Date(t,0,1),i=new Date(t,6,1);t=r.getTimezoneOffset();var s=i.getTimezoneOffset(),a=Math.max(t,s);E[Tt()>>2]=60*a,E[zt()>>2]=+(t!=s),r=e(r),i=e(i),r=yt(r),i=yt(i),s<t?(E[ke()>>2]=r,E[ke()+4>>2]=i):(E[ke()>>2]=i,E[ke()+4>>2]=r)}var Nt;function rt(e,t){for(var r=0,i=e.length-1;0<=i;i--){var s=e[i];s==="."?e.splice(i,1):s===".."?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r;r--)e.unshift("..");return e}function Ee(e){var t=e.charAt(0)==="/",r=e.substr(-1)==="/";return(e=rt(e.split("/").filter(function(i){return!!i}),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e}function Le(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.substr(0,t.length-1)),e+t)}function ie(e){if(e==="/")return"/";e=Ee(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)}function ve(e,t){return Ee(e+"/"+t)}function _r(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}if(ee)try{var t=ge;return function(){return t.randomBytes(1)[0]}}catch{}return function(){x("randomDevice")}}function he(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){if(t=0<=r?arguments[r]:n.cwd(),typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t=t.charAt(0)==="/"}return e=rt(e.split("/").filter(function(i){return!!i}),!t).join("/"),(t?"/":"")+e||"."}function Ft(e,t){function r(p){for(var _=0;_<p.length&&p[_]==="";_++);for(var v=p.length-1;0<=v&&p[v]==="";v--);return _>v?[]:p.slice(_,v-_+1)}e=he(e).substr(1),t=he(t).substr(1),e=r(e.split("/")),t=r(t.split("/"));for(var i=Math.min(e.length,t.length),s=i,a=0;a<i;a++)if(e[a]!==t[a]){s=a;break}for(i=[],a=s;a<e.length;a++)i.push("..");return i=i.concat(t.slice(s)),i.join("/")}var xt=[];function Ot(e,t){xt[e]={input:[],output:[],gb:t},n.Qb(e,wr)}var wr={open:function(e){var t=xt[e.node.rdev];if(!t)throw new n.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.gb.flush(e.tty)},flush:function(e){e.tty.gb.flush(e.tty)},read:function(e,t,r,i){if(!e.tty||!e.tty.gb.fc)throw new n.ErrnoError(60);for(var s=0,a=0;a<i;a++){try{var p=e.tty.gb.fc(e.tty)}catch{throw new n.ErrnoError(29)}if(p===void 0&&s===0)throw new n.ErrnoError(6);if(p==null)break;s++,t[r+a]=p}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,r,i){if(!e.tty||!e.tty.gb.Nb)throw new n.ErrnoError(60);try{for(var s=0;s<i;s++)e.tty.gb.Nb(e.tty,t[r+s])}catch{throw new n.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),s}},br={fc:function(e){if(!e.input.length){var t=null;if(ee){var r=Buffer.alloc(256),i=0;try{i=re.readSync(process.stdin.fd,r,0,256,null)}catch(s){if(s.toString().includes("EOF"))i=0;else throw s}0<i?t=r.slice(0,i).toString("utf-8"):t=null}else typeof window<"u"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t!==null&&(t+=`
`));if(!t)return null;e.input=Ue(t,!0)}return e.input.shift()},Nb:function(e,t){t===null||t===10?(Me(ye(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(Me(ye(e.output,0)),e.output=[])}},yr={Nb:function(e,t){t===null||t===10?(U(ye(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(U(ye(e.output,0)),e.output=[])}};function Rt(e){e=65536*Math.ceil(e/65536);var t=Lt(65536,e);return t?(H.fill(0,t,t+e),t):0}var D={Va:null,mount:function(){return D.createNode(null,"/",16895,0)},createNode:function(e,t,r,i){if(n.Sc(r)||n.isFIFO(r))throw new n.ErrnoError(63);return D.Va||(D.Va={dir:{node:{getattr:D.node_ops.getattr,setattr:D.node_ops.setattr,lookup:D.node_ops.lookup,mknod:D.node_ops.mknod,rename:D.node_ops.rename,unlink:D.node_ops.unlink,rmdir:D.node_ops.rmdir,readdir:D.node_ops.readdir,symlink:D.node_ops.symlink},stream:{llseek:D.stream_ops.llseek}},file:{node:{getattr:D.node_ops.getattr,setattr:D.node_ops.setattr},stream:{llseek:D.stream_ops.llseek,read:D.stream_ops.read,write:D.stream_ops.write,allocate:D.stream_ops.allocate,mmap:D.stream_ops.mmap,msync:D.stream_ops.msync}},link:{node:{getattr:D.node_ops.getattr,setattr:D.node_ops.setattr,readlink:D.node_ops.readlink},stream:{}},Xb:{node:{getattr:D.node_ops.getattr,setattr:D.node_ops.setattr},stream:n.Dc}}),r=n.createNode(e,t,r,i),n.isDir(r.mode)?(r.node_ops=D.Va.dir.node,r.stream_ops=D.Va.dir.stream,r.Na={}):n.isFile(r.mode)?(r.node_ops=D.Va.file.node,r.stream_ops=D.Va.file.stream,r.Ra=0,r.Na=null):n.fb(r.mode)?(r.node_ops=D.Va.link.node,r.stream_ops=D.Va.link.stream):n.pb(r.mode)&&(r.node_ops=D.Va.Xb.node,r.stream_ops=D.Va.Xb.stream),r.timestamp=Date.now(),e&&(e.Na[t]=r,e.timestamp=r.timestamp),r},rd:function(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},ac:function(e,t){var r=e.Na?e.Na.length:0;r>=t||(t=Math.max(t,r*(1048576>r?2:1.125)>>>0),r!=0&&(t=Math.max(t,256)),r=e.Na,e.Na=new Uint8Array(t),0<e.Ra&&e.Na.set(r.subarray(0,e.Ra),0))},hd:function(e,t){if(e.Ra!=t)if(t==0)e.Na=null,e.Ra=0;else{var r=e.Na;e.Na=new Uint8Array(t),r&&e.Na.set(r.subarray(0,Math.min(t,e.Ra))),e.Ra=t}},node_ops:{getattr:function(e){var t={};return t.dev=n.pb(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,n.isDir(e.mode)?t.size=4096:n.isFile(e.mode)?t.size=e.Ra:n.fb(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.Bc=4096,t.blocks=Math.ceil(t.size/t.Bc),t},setattr:function(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&D.hd(e,t.size)},lookup:function(){throw n.Db[44]},mknod:function(e,t,r,i){return D.createNode(e,t,r,i)},rename:function(e,t,r){if(n.isDir(e.mode)){try{var i=n.lookupNode(t,r)}catch{}if(i)for(var s in i.Na)throw new n.ErrnoError(55)}delete e.parent.Na[e.name],e.parent.timestamp=Date.now(),e.name=r,t.Na[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.Na[t],e.timestamp=Date.now()},rmdir:function(e,t){var r=n.lookupNode(e,t),i;for(i in r.Na)throw new n.ErrnoError(55);delete e.Na[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."],r;for(r in e.Na)e.Na.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){return e=D.createNode(e,t,41471,0),e.link=r,e},readlink:function(e){if(!n.fb(e.mode))throw new n.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,r,i,s){var a=e.node.Na;if(s>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-s,i),8<e&&a.subarray)t.set(a.subarray(s,s+e),r);else for(i=0;i<e;i++)t[r+i]=a[s+i];return e},write:function(e,t,r,i,s,a){if(t.buffer===W.buffer&&(a=!1),!i)return 0;if(e=e.node,e.timestamp=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(a)return e.Na=t.subarray(r,r+i),e.Ra=i;if(e.Ra===0&&s===0)return e.Na=t.slice(r,r+i),e.Ra=i;if(s+i<=e.Ra)return e.Na.set(t.subarray(r,r+i),s),i}if(D.ac(e,s+i),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(r,r+i),s);else for(a=0;a<i;a++)e.Na[s+a]=t[r+a];return e.Ra=Math.max(e.Ra,s+i),i},llseek:function(e,t,r){if(r===1?t+=e.position:r===2&&n.isFile(e.node.mode)&&(t+=e.node.Ra),0>t)throw new n.ErrnoError(28);return t},allocate:function(e,t,r){D.ac(e.node,t+r),e.node.Ra=Math.max(e.node.Ra,t+r)},mmap:function(e,t,r,i,s,a){if(t!==0)throw new n.ErrnoError(28);if(!n.isFile(e.node.mode))throw new n.ErrnoError(43);if(e=e.node.Na,a&2||e.buffer!==Je){if((0<i||i+r<e.length)&&(e.subarray?e=e.subarray(i,i+r):e=Array.prototype.slice.call(e,i,i+r)),i=!0,r=Rt(r),!r)throw new n.ErrnoError(48);W.set(e,r)}else i=!1,r=e.byteOffset;return{gd:r,vb:i}},msync:function(e,t,r,i,s){if(!n.isFile(e.node.mode))throw new n.ErrnoError(43);return s&2||D.stream_ops.write(e,t,0,i,r,!1),0}}};function Er(e,t,r){var i="al "+e;ue(e,function(s){Ye(s,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(s)),i&&Te()},function(){if(r)r();else throw'Loading data file "'+e+'" failed.'}),i&&et()}var n={root:null,mb:[],Zb:{},streams:[],$c:1,Ua:null,Yb:"/",Hb:!1,kc:!0,Sa:{},qc:{nc:{tc:1,uc:2}},ErrnoError:null,Db:{},Mc:null,tb:0,lookupPath:function(e,t){if(e=he(n.cwd(),e),t=t||{},!e)return{path:"",node:null};var r={Cb:!0,Pb:0},i;for(i in r)t[i]===void 0&&(t[i]=r[i]);if(8<t.Pb)throw new n.ErrnoError(32);e=rt(e.split("/").filter(function(p){return!!p}),!1);var s=n.root;for(r="/",i=0;i<e.length;i++){var a=i===e.length-1;if(a&&t.parent)break;if(s=n.lookupNode(s,e[i]),r=ve(r,e[i]),n.ab(s)&&(!a||a&&t.Cb)&&(s=s.lb.root),!a||t.Ta){for(a=0;n.fb(s.mode);)if(s=n.readlink(r),r=he(Le(r),s),s=n.lookupPath(r,{Pb:t.Pb}).node,40<a++)throw new n.ErrnoError(32)}}return{path:r,node:s}},Ya:function(e){for(var t;;){if(n.isRoot(e))return e=e.mount.mc,t?e[e.length-1]!=="/"?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}},Gb:function(e,t){for(var r=0,i=0;i<t.length;i++)r=(r<<5)-r+t.charCodeAt(i)|0;return(e+r>>>0)%n.Ua.length},ic:function(e){var t=n.Gb(e.parent.id,e.name);e.cb=n.Ua[t],n.Ua[t]=e},jc:function(e){var t=n.Gb(e.parent.id,e.name);if(n.Ua[t]===e)n.Ua[t]=e.cb;else for(t=n.Ua[t];t;){if(t.cb===e){t.cb=e.cb;break}t=t.cb}},lookupNode:function(e,t){var r=n.Wc(e);if(r)throw new n.ErrnoError(r,e);for(r=n.Ua[n.Gb(e.id,t)];r;r=r.cb){var i=r.name;if(r.parent.id===e.id&&i===t)return r}return n.lookup(e,t)},createNode:function(e,t,r,i){return e=new n.FSNode(e,t,r,i),n.ic(e),e},Ab:function(e){n.jc(e)},isRoot:function(e){return e===e.parent},ab:function(e){return!!e.lb},isFile:function(e){return(e&61440)===32768},isDir:function(e){return(e&61440)===16384},fb:function(e){return(e&61440)===40960},pb:function(e){return(e&61440)===8192},Sc:function(e){return(e&61440)===24576},isFIFO:function(e){return(e&61440)===4096},isSocket:function(e){return(e&49152)===49152},Nc:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Zc:function(e){var t=n.Nc[e];if(typeof t>"u")throw Error("Unknown file open mode: "+e);return t},bc:function(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},Za:function(e,t){if(n.kc)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0},Wc:function(e){var t=n.Za(e,"x");return t||(e.node_ops.lookup?0:2)},Lb:function(e,t){try{return n.lookupNode(e,t),20}catch{}return n.Za(e,"wx")},qb:function(e,t,r){try{var i=n.lookupNode(e,t)}catch(s){return s.Oa}if(e=n.Za(e,"wx"))return e;if(r){if(!n.isDir(i.mode))return 54;if(n.isRoot(i)||n.Ya(i)===n.cwd())return 10}else if(n.isDir(i.mode))return 31;return 0},Xc:function(e,t){return e?n.fb(e.mode)?32:n.isDir(e.mode)&&(n.bc(t)!=="r"||t&512)?31:n.Za(e,n.bc(t)):44},rc:4096,ad:function(e,t){for(t=t||n.rc,e=e||0;e<=t;e++)if(!n.streams[e])return e;throw new n.ErrnoError(33)},$a:function(e){return n.streams[e]},Kc:function(e,t,r){n.ub||(n.ub=function(){},n.ub.prototype={object:{get:function(){return this.node},set:function(a){this.node=a}}});var i=new n.ub,s;for(s in e)i[s]=e[s];return e=i,t=n.ad(t,r),e.fd=t,n.streams[t]=e},Ec:function(e){n.streams[e]=null},Dc:{open:function(e){e.stream_ops=n.Qc(e.node.rdev).stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new n.ErrnoError(70)}},Kb:function(e){return e>>8},td:function(e){return e&255},bb:function(e,t){return e<<8|t},Qb:function(e,t){n.Zb[e]={stream_ops:t}},Qc:function(e){return n.Zb[e]},dc:function(e){var t=[];for(e=[e];e.length;){var r=e.pop();t.push(r),e.push.apply(e,r.mb)}return t},pc:function(e,t){function r(p){return n.tb--,t(p)}function i(p){if(p){if(!i.Lc)return i.Lc=!0,r(p)}else++a>=s.length&&r(null)}typeof e=="function"&&(t=e,e=!1),n.tb++,1<n.tb&&U("warning: "+n.tb+" FS.syncfs operations in flight at once, probably just doing extra work");var s=n.dc(n.root.mount),a=0;s.forEach(function(p){if(!p.type.pc)return i(null);p.type.pc(p,e,i)})},mount:function(e,t,r){var i=r==="/",s=!r;if(i&&n.root)throw new n.ErrnoError(10);if(!i&&!s){var a=n.lookupPath(r,{Cb:!1});if(r=a.path,a=a.node,n.ab(a))throw new n.ErrnoError(10);if(!n.isDir(a.mode))throw new n.ErrnoError(54)}return t={type:e,wd:t,mc:r,mb:[]},e=e.mount(t),e.mount=t,t.root=e,i?n.root=e:a&&(a.lb=t,a.mount&&a.mount.mb.push(t)),e},zd:function(e){if(e=n.lookupPath(e,{Cb:!1}),!n.ab(e.node))throw new n.ErrnoError(28);e=e.node;var t=e.lb,r=n.dc(t);Object.keys(n.Ua).forEach(function(i){for(i=n.Ua[i];i;){var s=i.cb;r.includes(i.mount)&&n.Ab(i),i=s}}),e.lb=null,e.mount.mb.splice(e.mount.mb.indexOf(t),1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,r){var i=n.lookupPath(e,{parent:!0}).node;if(e=ie(e),!e||e==="."||e==="..")throw new n.ErrnoError(28);var s=n.Lb(i,e);if(s)throw new n.ErrnoError(s);if(!i.node_ops.mknod)throw new n.ErrnoError(63);return i.node_ops.mknod(i,e,t,r)},create:function(e,t){return n.mknod(e,(t!==void 0?t:438)&4095|32768,0)},mkdir:function(e,t){return n.mknod(e,(t!==void 0?t:511)&1023|16384,0)},ud:function(e,t){e=e.split("/");for(var r="",i=0;i<e.length;++i)if(e[i]){r+="/"+e[i];try{n.mkdir(r,t)}catch(s){if(s.Oa!=20)throw s}}},rb:function(e,t,r){return typeof r>"u"&&(r=t,t=438),n.mknod(e,t|8192,r)},symlink:function(e,t){if(!he(e))throw new n.ErrnoError(44);var r=n.lookupPath(t,{parent:!0}).node;if(!r)throw new n.ErrnoError(44);t=ie(t);var i=n.Lb(r,t);if(i)throw new n.ErrnoError(i);if(!r.node_ops.symlink)throw new n.ErrnoError(63);return r.node_ops.symlink(r,t,e)},rename:function(e,t){var r=Le(e),i=Le(t),s=ie(e),a=ie(t),p=n.lookupPath(e,{parent:!0}),_=p.node;if(p=n.lookupPath(t,{parent:!0}),p=p.node,!_||!p)throw new n.ErrnoError(44);if(_.mount!==p.mount)throw new n.ErrnoError(75);var v=n.lookupNode(_,s);if(i=Ft(e,i),i.charAt(0)!==".")throw new n.ErrnoError(28);if(i=Ft(t,r),i.charAt(0)!==".")throw new n.ErrnoError(55);try{var w=n.lookupNode(p,a)}catch{}if(v!==w){if(r=n.isDir(v.mode),s=n.qb(_,s,r))throw new n.ErrnoError(s);if(s=w?n.qb(p,a,r):n.Lb(p,a))throw new n.ErrnoError(s);if(!_.node_ops.rename)throw new n.ErrnoError(63);if(n.ab(v)||w&&n.ab(w))throw new n.ErrnoError(10);if(p!==_&&(s=n.Za(_,"w")))throw new n.ErrnoError(s);try{n.Sa.willMovePath&&n.Sa.willMovePath(e,t)}catch(S){U("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+S.message)}n.jc(v);try{_.node_ops.rename(v,p,a)}catch(S){throw S}finally{n.ic(v)}try{n.Sa.onMovePath&&n.Sa.onMovePath(e,t)}catch(S){U("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+S.message)}}},rmdir:function(e){var t=n.lookupPath(e,{parent:!0}).node,r=ie(e),i=n.lookupNode(t,r),s=n.qb(t,r,!0);if(s)throw new n.ErrnoError(s);if(!t.node_ops.rmdir)throw new n.ErrnoError(63);if(n.ab(i))throw new n.ErrnoError(10);try{n.Sa.willDeletePath&&n.Sa.willDeletePath(e)}catch(a){U("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+a.message)}t.node_ops.rmdir(t,r),n.Ab(i);try{n.Sa.onDeletePath&&n.Sa.onDeletePath(e)}catch(a){U("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+a.message)}},readdir:function(e){if(e=n.lookupPath(e,{Ta:!0}).node,!e.node_ops.readdir)throw new n.ErrnoError(54);return e.node_ops.readdir(e)},unlink:function(e){var t=n.lookupPath(e,{parent:!0}).node,r=ie(e),i=n.lookupNode(t,r),s=n.qb(t,r,!1);if(s)throw new n.ErrnoError(s);if(!t.node_ops.unlink)throw new n.ErrnoError(63);if(n.ab(i))throw new n.ErrnoError(10);try{n.Sa.willDeletePath&&n.Sa.willDeletePath(e)}catch(a){U("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+a.message)}t.node_ops.unlink(t,r),n.Ab(i);try{n.Sa.onDeletePath&&n.Sa.onDeletePath(e)}catch(a){U("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+a.message)}},readlink:function(e){if(e=n.lookupPath(e).node,!e)throw new n.ErrnoError(44);if(!e.node_ops.readlink)throw new n.ErrnoError(28);return he(n.Ya(e.parent),e.node_ops.readlink(e))},stat:function(e,t){if(e=n.lookupPath(e,{Ta:!t}).node,!e)throw new n.ErrnoError(44);if(!e.node_ops.getattr)throw new n.ErrnoError(63);return e.node_ops.getattr(e)},lstat:function(e){return n.stat(e,!0)},chmod:function(e,t,r){if(e=typeof e=="string"?n.lookupPath(e,{Ta:!r}).node:e,!e.node_ops.setattr)throw new n.ErrnoError(63);e.node_ops.setattr(e,{mode:t&4095|e.mode&-4096,timestamp:Date.now()})},lchmod:function(e,t){n.chmod(e,t,!0)},fchmod:function(e,t){if(e=n.$a(e),!e)throw new n.ErrnoError(8);n.chmod(e.node,t)},chown:function(e,t,r,i){if(e=typeof e=="string"?n.lookupPath(e,{Ta:!i}).node:e,!e.node_ops.setattr)throw new n.ErrnoError(63);e.node_ops.setattr(e,{timestamp:Date.now()})},lchown:function(e,t,r){n.chown(e,t,r,!0)},fchown:function(e,t,r){if(e=n.$a(e),!e)throw new n.ErrnoError(8);n.chown(e.node,t,r)},truncate:function(e,t){if(0>t)throw new n.ErrnoError(28);if(e=typeof e=="string"?n.lookupPath(e,{Ta:!0}).node:e,!e.node_ops.setattr)throw new n.ErrnoError(63);if(n.isDir(e.mode))throw new n.ErrnoError(31);if(!n.isFile(e.mode))throw new n.ErrnoError(28);var r=n.Za(e,"w");if(r)throw new n.ErrnoError(r);e.node_ops.setattr(e,{size:t,timestamp:Date.now()})},Oc:function(e,t){if(e=n.$a(e),!e)throw new n.ErrnoError(8);if(!(e.flags&2097155))throw new n.ErrnoError(28);n.truncate(e.node,t)},ld:function(e,t,r){e=n.lookupPath(e,{Ta:!0}).node,e.node_ops.setattr(e,{timestamp:Math.max(t,r)})},open:function(e,t,r,i,s){if(e==="")throw new n.ErrnoError(44);if(t=typeof t=="string"?n.Zc(t):t,r=t&64?(typeof r>"u"?438:r)&4095|32768:0,typeof e=="object")var a=e;else{e=Ee(e);try{a=n.lookupPath(e,{Ta:!(t&131072)}).node}catch{}}var p=!1;if(t&64)if(a){if(t&128)throw new n.ErrnoError(20)}else a=n.mknod(e,r,0),p=!0;if(!a)throw new n.ErrnoError(44);if(n.pb(a.mode)&&(t&=-513),t&65536&&!n.isDir(a.mode))throw new n.ErrnoError(54);if(!p&&(r=n.Xc(a,t)))throw new n.ErrnoError(r);t&512&&n.truncate(a,0),t&=-131713,i=n.Kc({node:a,path:n.Ya(a),flags:t,seekable:!0,position:0,stream_ops:a.stream_ops,kd:[],error:!1},i,s),i.stream_ops.open&&i.stream_ops.open(i),!o.logReadFiles||t&1||(n.Ob||(n.Ob={}),e in n.Ob||(n.Ob[e]=1,U("FS.trackingDelegate error on read file: "+e)));try{n.Sa.onOpenFile&&(s=0,(t&2097155)!==1&&(s|=n.qc.nc.tc),t&2097155&&(s|=n.qc.nc.uc),n.Sa.onOpenFile(e,s))}catch(_){U("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+_.message)}return i},close:function(e){if(n.kb(e))throw new n.ErrnoError(8);e.Fb&&(e.Fb=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{n.Ec(e.fd)}e.fd=null},kb:function(e){return e.fd===null},llseek:function(e,t,r){if(n.kb(e))throw new n.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new n.ErrnoError(70);if(r!=0&&r!=1&&r!=2)throw new n.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.kd=[],e.position},read:function(e,t,r,i,s){if(0>i||0>s)throw new n.ErrnoError(28);if(n.kb(e))throw new n.ErrnoError(8);if((e.flags&2097155)===1)throw new n.ErrnoError(8);if(n.isDir(e.node.mode))throw new n.ErrnoError(31);if(!e.stream_ops.read)throw new n.ErrnoError(28);var a=typeof s<"u";if(!a)s=e.position;else if(!e.seekable)throw new n.ErrnoError(70);return t=e.stream_ops.read(e,t,r,i,s),a||(e.position+=t),t},write:function(e,t,r,i,s,a){if(0>i||0>s)throw new n.ErrnoError(28);if(n.kb(e))throw new n.ErrnoError(8);if(!(e.flags&2097155))throw new n.ErrnoError(8);if(n.isDir(e.node.mode))throw new n.ErrnoError(31);if(!e.stream_ops.write)throw new n.ErrnoError(28);e.seekable&&e.flags&1024&&n.llseek(e,0,2);var p=typeof s<"u";if(!p)s=e.position;else if(!e.seekable)throw new n.ErrnoError(70);t=e.stream_ops.write(e,t,r,i,s,a),p||(e.position+=t);try{e.path&&n.Sa.onWriteToFile&&n.Sa.onWriteToFile(e.path)}catch(_){U("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+_.message)}return t},allocate:function(e,t,r){if(n.kb(e))throw new n.ErrnoError(8);if(0>t||0>=r)throw new n.ErrnoError(28);if(!(e.flags&2097155))throw new n.ErrnoError(8);if(!n.isFile(e.node.mode)&&!n.isDir(e.node.mode))throw new n.ErrnoError(43);if(!e.stream_ops.allocate)throw new n.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap:function(e,t,r,i,s,a){if(s&2&&!(a&2)&&(e.flags&2097155)!==2)throw new n.ErrnoError(2);if((e.flags&2097155)===1)throw new n.ErrnoError(2);if(!e.stream_ops.mmap)throw new n.ErrnoError(43);return e.stream_ops.mmap(e,t,r,i,s,a)},msync:function(e,t,r,i,s){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,i,s):0},vd:function(){return 0},lc:function(e,t,r){if(!e.stream_ops.lc)throw new n.ErrnoError(59);return e.stream_ops.lc(e,t,r)},readFile:function(e,t){if(t=t||{},t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw Error('Invalid encoding type "'+t.encoding+'"');var r,i=n.open(e,t.flags);e=n.stat(e).size;var s=new Uint8Array(e);return n.read(i,s,0,e,0),t.encoding==="utf8"?r=ye(s,0):t.encoding==="binary"&&(r=s),n.close(i),r},writeFile:function(e,t,r){if(r=r||{},r.flags=r.flags||577,e=n.open(e,r.flags,r.mode),typeof t=="string"){var i=new Uint8Array(ce(t)+1);t=ne(t,i,0,i.length),n.write(e,i,0,t,void 0,r.Cc)}else if(ArrayBuffer.isView(t))n.write(e,t,0,t.byteLength,void 0,r.Cc);else throw Error("Unsupported data type");n.close(e)},cwd:function(){return n.Yb},chdir:function(e){if(e=n.lookupPath(e,{Ta:!0}),e.node===null)throw new n.ErrnoError(44);if(!n.isDir(e.node.mode))throw new n.ErrnoError(54);var t=n.Za(e.node,"x");if(t)throw new n.ErrnoError(t);n.Yb=e.path},Gc:function(){n.mkdir("/tmp"),n.mkdir("/home"),n.mkdir("/home/web_user")},Fc:function(){n.mkdir("/dev"),n.Qb(n.bb(1,3),{read:function(){return 0},write:function(t,r,i,s){return s}}),n.rb("/dev/null",n.bb(1,3)),Ot(n.bb(5,0),br),Ot(n.bb(6,0),yr),n.rb("/dev/tty",n.bb(5,0)),n.rb("/dev/tty1",n.bb(6,0));var e=_r();n.Wa("/dev","random",e),n.Wa("/dev","urandom",e),n.mkdir("/dev/shm"),n.mkdir("/dev/shm/tmp")},Ic:function(){n.mkdir("/proc");var e=n.mkdir("/proc/self");n.mkdir("/proc/self/fd"),n.mount({mount:function(){var t=n.createNode(e,"fd",16895,73);return t.node_ops={lookup:function(r,i){var s=n.$a(+i);if(!s)throw new n.ErrnoError(8);return r={parent:null,mount:{mc:"fake"},node_ops:{readlink:function(){return s.path}}},r.parent=r}},t}},{},"/proc/self/fd")},Jc:function(){o.stdin?n.Wa("/dev","stdin",o.stdin):n.symlink("/dev/tty","/dev/stdin"),o.stdout?n.Wa("/dev","stdout",null,o.stdout):n.symlink("/dev/tty","/dev/stdout"),o.stderr?n.Wa("/dev","stderr",null,o.stderr):n.symlink("/dev/tty1","/dev/stderr"),n.open("/dev/stdin",0),n.open("/dev/stdout",1),n.open("/dev/stderr",1)},$b:function(){n.ErrnoError||(n.ErrnoError=function(e,t){this.node=t,this.jd=function(r){this.Oa=r},this.jd(e),this.message="FS error"},n.ErrnoError.prototype=Error(),n.ErrnoError.prototype.constructor=n.ErrnoError,[44].forEach(function(e){n.Db[e]=new n.ErrnoError(e),n.Db[e].stack="<generic error, no stack>"}))},oc:function(){n.$b(),n.Ua=Array(4096),n.mount(D,{},"/"),n.Gc(),n.Fc(),n.Ic(),n.Mc={MEMFS:D}},jb:function(e,t,r){n.jb.Hb=!0,n.$b(),o.stdin=e||o.stdin,o.stdout=t||o.stdout,o.stderr=r||o.stderr,n.Jc()},xd:function(){n.jb.Hb=!1;var e=o._fflush;for(e&&e(0),e=0;e<n.streams.length;e++){var t=n.streams[e];t&&n.close(t)}},Eb:function(e,t){var r=0;return e&&(r|=365),t&&(r|=146),r},pd:function(e,t){return e=n.xb(e,t),e.exists?e.object:null},xb:function(e,t){try{var r=n.lookupPath(e,{Ta:!t});e=r.path}catch{}var i={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,bd:!1,dd:null,cd:null};try{r=n.lookupPath(e,{parent:!0}),i.bd=!0,i.dd=r.path,i.cd=r.node,i.name=ie(e),r=n.lookupPath(e,{Ta:!t}),i.exists=!0,i.path=r.path,i.object=r.node,i.name=r.node.name,i.isRoot=r.path==="/"}catch(s){i.error=s.Oa}return i},nd:function(e,t){for(e=typeof e=="string"?e:n.Ya(e),t=t.split("/").reverse();t.length;){var r=t.pop();if(r){var i=ve(e,r);try{n.mkdir(i)}catch{}e=i}}return i},Hc:function(e,t,r,i,s){return e=ve(typeof e=="string"?e:n.Ya(e),t),n.create(e,n.Eb(i,s))},zb:function(e,t,r,i,s,a){if(e=t?ve(typeof e=="string"?e:n.Ya(e),t):e,i=n.Eb(i,s),s=n.create(e,i),r){if(typeof r=="string"){e=Array(r.length),t=0;for(var p=r.length;t<p;++t)e[t]=r.charCodeAt(t);r=e}n.chmod(s,i|146),e=n.open(s,577),n.write(e,r,0,r.length,0,a),n.close(e),n.chmod(s,i)}return s},Wa:function(e,t,r,i){e=ve(typeof e=="string"?e:n.Ya(e),t),t=n.Eb(!!r,!!i),n.Wa.Kb||(n.Wa.Kb=64);var s=n.bb(n.Wa.Kb++,0);return n.Qb(s,{open:function(a){a.seekable=!1},close:function(){i&&i.buffer&&i.buffer.length&&i(10)},read:function(a,p,_,v){for(var w=0,S=0;S<v;S++){try{var O=r()}catch{throw new n.ErrnoError(29)}if(O===void 0&&w===0)throw new n.ErrnoError(6);if(O==null)break;w++,p[_+S]=O}return w&&(a.node.timestamp=Date.now()),w},write:function(a,p,_,v){for(var w=0;w<v;w++)try{i(p[_+w])}catch{throw new n.ErrnoError(29)}return v&&(a.node.timestamp=Date.now()),w}}),n.rb(e,t,s)},cc:function(e){if(e.Ib||e.Tc||e.link||e.Na)return!0;if(typeof XMLHttpRequest<"u")throw Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(_e)try{e.Na=Ue(_e(e.url),!0),e.Ra=e.Na.length}catch{throw new n.ErrnoError(29)}else throw Error("Cannot load without read() or XMLHttpRequest.")},md:function(e,t,r,i,s){function a(){this.Jb=!1,this.ob=[]}if(a.prototype.get=function(w){if(!(w>this.length-1||0>w)){var S=w%this.chunkSize;return this.hc(w/this.chunkSize|0)[S]}},a.prototype.sc=function(w){this.hc=w},a.prototype.Wb=function(){var w=new XMLHttpRequest;if(w.open("HEAD",r,!1),w.send(null),!(200<=w.status&&300>w.status||w.status===304))throw Error("Couldn't load "+r+". Status: "+w.status);var S=Number(w.getResponseHeader("Content-length")),O,T=(O=w.getResponseHeader("Accept-Ranges"))&&O==="bytes";w=(O=w.getResponseHeader("Content-Encoding"))&&O==="gzip";var I=1048576;T||(I=S);var z=this;z.sc(function(V){var pe=V*I,le=(V+1)*I-1;if(le=Math.min(le,S-1),typeof z.ob[V]>"u"){var ft=z.ob;if(pe>le)throw Error("invalid range ("+pe+", "+le+") or no bytes requested!");if(le>S-1)throw Error("only "+S+" bytes available! programmer error!");var j=new XMLHttpRequest;if(j.open("GET",r,!1),S!==I&&j.setRequestHeader("Range","bytes="+pe+"-"+le),typeof Uint8Array<"u"&&(j.responseType="arraybuffer"),j.overrideMimeType&&j.overrideMimeType("text/plain; charset=x-user-defined"),j.send(null),!(200<=j.status&&300>j.status||j.status===304))throw Error("Couldn't load "+r+". Status: "+j.status);pe=j.response!==void 0?new Uint8Array(j.response||[]):Ue(j.responseText||"",!0),ft[V]=pe}if(typeof z.ob[V]>"u")throw Error("doXHR failed!");return z.ob[V]}),(w||!S)&&(I=S=1,I=S=this.hc(0).length,Me("LazyFiles on gzip forces download of the whole file when length is accessed")),this.wc=S,this.vc=I,this.Jb=!0},typeof XMLHttpRequest<"u"){if(!L)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var p=new a;Object.defineProperties(p,{length:{get:function(){return this.Jb||this.Wb(),this.wc}},chunkSize:{get:function(){return this.Jb||this.Wb(),this.vc}}}),p={Ib:!1,Na:p}}else p={Ib:!1,url:r};var _=n.Hc(e,t,p,i,s);p.Na?_.Na=p.Na:p.url&&(_.Na=null,_.url=p.url),Object.defineProperties(_,{Ra:{get:function(){return this.Na.length}}});var v={};return Object.keys(_.stream_ops).forEach(function(w){var S=_.stream_ops[w];v[w]=function(){return n.cc(_),S.apply(null,arguments)}}),v.read=function(w,S,O,T,I){if(n.cc(_),w=w.node.Na,I>=w.length)return 0;if(T=Math.min(w.length-I,T),w.slice)for(var z=0;z<T;z++)S[O+z]=w[I+z];else for(z=0;z<T;z++)S[O+z]=w.get(I+z);return T},_.stream_ops=v,_},od:function(e,t,r,i,s,a,p,_,v,w){function S(T){function I(V){w&&w(),_||n.zb(e,t,V,i,s,v),a&&a(),Te()}var z=!1;o.preloadPlugins.forEach(function(V){!z&&V.canHandle(O)&&(V.handle(T,O,I,function(){p&&p(),Te()}),z=!0)}),z||I(T)}vr.jb();var O=t?he(ve(e,t)):e;et(),typeof r=="string"?Er(r,function(T){S(T)},p):S(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},Rb:function(){return"EM_FS_"+window.location.pathname},Sb:20,ib:"FILE_DATA",yd:function(e,t,r){t=t||function(){},r=r||function(){};var i=n.indexedDB();try{var s=i.open(n.Rb(),n.Sb)}catch(a){return r(a)}s.onupgradeneeded=function(){Me("creating db"),s.result.createObjectStore(n.ib)},s.onsuccess=function(){var a=s.result.transaction([n.ib],"readwrite"),p=a.objectStore(n.ib),_=0,v=0,w=e.length;e.forEach(function(S){S=p.put(n.xb(S).object.Na,S),S.onsuccess=function(){_++,_+v==w&&(v==0?t():r())},S.onerror=function(){v++,_+v==w&&(v==0?t():r())}}),a.onerror=r},s.onerror=r},sd:function(e,t,r){t=t||function(){},r=r||function(){};var i=n.indexedDB();try{var s=i.open(n.Rb(),n.Sb)}catch(a){return r(a)}s.onupgradeneeded=r,s.onsuccess=function(){var a=s.result;try{var p=a.transaction([n.ib],"readonly")}catch(O){r(O);return}var _=p.objectStore(n.ib),v=0,w=0,S=e.length;e.forEach(function(O){var T=_.get(O);T.onsuccess=function(){n.xb(O).exists&&n.unlink(O),n.zb(Le(O),ie(O),T.result,!0,!0,!0),v++,v+w==S&&(w==0?t():r())},T.onerror=function(){w++,v+w==S&&(w==0?t():r())}}),p.onerror=r},s.onerror=r}},nt={};function it(e,t,r){try{var i=e(t)}catch(s){if(s&&s.node&&Ee(t)!==Ee(n.Ya(s.node)))return-54;throw s}return E[r>>2]=i.dev,E[r+4>>2]=0,E[r+8>>2]=i.ino,E[r+12>>2]=i.mode,E[r+16>>2]=i.nlink,E[r+20>>2]=i.uid,E[r+24>>2]=i.gid,E[r+28>>2]=i.rdev,E[r+32>>2]=0,Y=[i.size>>>0,(P=i.size,1<=+Math.abs(P)?0<P?(Math.min(+Math.floor(P/4294967296),4294967295)|0)>>>0:~~+Math.ceil((P-+(~~P>>>0))/4294967296)>>>0:0)],E[r+40>>2]=Y[0],E[r+44>>2]=Y[1],E[r+48>>2]=4096,E[r+52>>2]=i.blocks,E[r+56>>2]=i.atime.getTime()/1e3|0,E[r+60>>2]=0,E[r+64>>2]=i.mtime.getTime()/1e3|0,E[r+68>>2]=0,E[r+72>>2]=i.ctime.getTime()/1e3|0,E[r+76>>2]=0,Y=[i.ino>>>0,(P=i.ino,1<=+Math.abs(P)?0<P?(Math.min(+Math.floor(P/4294967296),4294967295)|0)>>>0:~~+Math.ceil((P-+(~~P>>>0))/4294967296)>>>0:0)],E[r+80>>2]=Y[0],E[r+84>>2]=Y[1],0}var Be=void 0;function We(){return Be+=4,E[Be-4>>2]}function oe(e){if(e=n.$a(e),!e)throw new n.ErrnoError(8);return e}var ot;ot=ee?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:function(){return performance.now()};var st={};function Mt(){if(!lt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:q||"./this.program"},t;for(t in st)st[t]===void 0?delete e[t]:e[t]=st[t];var r=[];for(t in e)r.push(t+"="+e[t]);lt=r}return lt}var lt;function Pt(e,t,r,i){e||(e=this),this.parent=e,this.mount=e.mount,this.lb=null,this.id=n.$c++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=i}Object.defineProperties(Pt.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(e){e?this.mode|=146:this.mode&=-147}},Tc:{get:function(){return n.isDir(this.mode)}},Ib:{get:function(){return n.pb(this.mode)}}}),n.FSNode=Pt,n.oc();var vr;function Ue(e,t){var r=Array(ce(e)+1);return e=ne(e,r,0,r.length),t&&(r.length=e),r}var kr={a:function(e,t,r,i){x("Assertion failed: "+B(e)+", at: "+[t?B(t):"unknown filename",r,i?B(i):"unknown function"])},r:function(e,t){Nt||(Nt=!0,gr()),e=new Date(1e3*E[e>>2]),E[t>>2]=e.getSeconds(),E[t+4>>2]=e.getMinutes(),E[t+8>>2]=e.getHours(),E[t+12>>2]=e.getDate(),E[t+16>>2]=e.getMonth(),E[t+20>>2]=e.getFullYear()-1900,E[t+24>>2]=e.getDay();var r=new Date(e.getFullYear(),0,1);E[t+28>>2]=(e.getTime()-r.getTime())/864e5|0,E[t+36>>2]=-(60*e.getTimezoneOffset());var i=new Date(e.getFullYear(),6,1).getTimezoneOffset();return r=r.getTimezoneOffset(),e=(i!=r&&e.getTimezoneOffset()==Math.min(r,i))|0,E[t+32>>2]=e,e=E[ke()+(e?4:0)>>2],E[t+40>>2]=e,t},C:function(e,t){try{if(e=B(e),t&-8)var r=-28;else{var i;(i=n.lookupPath(e,{Ta:!0}).node)?(e="",t&4&&(e+="r"),t&2&&(e+="w"),t&1&&(e+="x"),r=e&&n.Za(i,e)?-2:0):r=-44}return r}catch(s){return typeof n<"u"&&s instanceof n.ErrnoError||x(s),-s.Oa}},x:function(e,t){try{return e=B(e),n.chmod(e,t),0}catch(r){return typeof n<"u"&&r instanceof n.ErrnoError||x(r),-r.Oa}},J:function(e,t,r){try{return e=B(e),n.chown(e,t,r),0}catch(i){return typeof n<"u"&&i instanceof n.ErrnoError||x(i),-i.Oa}},y:function(e,t){try{return n.fchmod(e,t),0}catch(r){return typeof n<"u"&&r instanceof n.ErrnoError||x(r),-r.Oa}},h:function(e,t,r){try{return n.fchown(e,t,r),0}catch(i){return typeof n<"u"&&i instanceof n.ErrnoError||x(i),-i.Oa}},b:function(e,t,r){Be=r;try{var i=oe(e);switch(t){case 0:var s=We();return 0>s?-28:n.open(i.path,i.flags,0,s).fd;case 1:case 2:return 0;case 3:return i.flags;case 4:return s=We(),i.flags|=s,0;case 12:return s=We(),ze[s+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return E[at()>>2]=28,-1;default:return-28}}catch(a){return typeof n<"u"&&a instanceof n.ErrnoError||x(a),-a.Oa}},w:function(e,t){try{var r=oe(e);return it(n.stat,r.path,t)}catch(i){return typeof n<"u"&&i instanceof n.ErrnoError||x(i),-i.Oa}},i:function(e,t,r){try{return n.Oc(e,r),0}catch(i){return typeof n<"u"&&i instanceof n.ErrnoError||x(i),-i.Oa}},I:function(e,t){try{if(t===0)return-28;var r=n.cwd();return t<ce(r)+1?-68:(ne(r,H,e,t),e)}catch(i){return typeof n<"u"&&i instanceof n.ErrnoError||x(i),-i.Oa}},D:function(){return 0},d:function(){return 42},v:function(e,t){try{return e=B(e),it(n.lstat,e,t)}catch(r){return typeof n<"u"&&r instanceof n.ErrnoError||x(r),-r.Oa}},u:function(e,t){try{return e=B(e),e=Ee(e),e[e.length-1]==="/"&&(e=e.substr(0,e.length-1)),n.mkdir(e,t,0),0}catch(r){return typeof n<"u"&&r instanceof n.ErrnoError||x(r),-r.Oa}},t:function(e,t,r,i,s,a){try{e:{a<<=12;var p=!1;if(i&16&&e%65536!==0)var _=-28;else{if(i&32){var v=Rt(t);if(!v){_=-48;break e}p=!0}else{var w=n.$a(s);if(!w){_=-8;break e}var S=n.mmap(w,e,t,a,r,i);v=S.gd,p=S.vb}nt[v]={Vc:v,Uc:t,vb:p,fd:s,ed:r,flags:i,offset:a},_=v}}return _}catch(O){return typeof n<"u"&&O instanceof n.ErrnoError||x(O),-O.Oa}},s:function(e,t){try{var r=nt[e];if(t!==0&&r){if(t===r.Uc){var i=n.$a(r.fd);if(i&&r.ed&2){var s=r.flags,a=r.offset,p=H.slice(e,e+t);n.msync(i,p,a,t,s)}nt[e]=null,r.vb&&Ne(r.Vc)}var _=0}else _=-28;return _}catch(v){return typeof n<"u"&&v instanceof n.ErrnoError||x(v),-v.Oa}},k:function(e,t,r){Be=r;try{var i=B(e),s=r?We():0;return n.open(i,t,s).fd}catch(a){return typeof n<"u"&&a instanceof n.ErrnoError||x(a),-a.Oa}},B:function(e,t,r){try{if(e=B(e),0>=r)var i=-28;else{var s=n.readlink(e),a=Math.min(r,ce(s)),p=W[t+a];ne(s,H,t,r+1),W[t+a]=p,i=a}return i}catch(_){return typeof n<"u"&&_ instanceof n.ErrnoError||x(_),-_.Oa}},H:function(e){try{return e=B(e),n.rmdir(e),0}catch(t){return typeof n<"u"&&t instanceof n.ErrnoError||x(t),-t.Oa}},f:function(e,t){try{return e=B(e),it(n.stat,e,t)}catch(r){return typeof n<"u"&&r instanceof n.ErrnoError||x(r),-r.Oa}},F:function(e){try{return e=B(e),n.unlink(e),0}catch(t){return typeof n<"u"&&t instanceof n.ErrnoError||x(t),-t.Oa}},j:function(){return 2147483648},m:function(e,t,r){H.copyWithin(e,t,t+r)},c:function(e){var t=H.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var i=t*(1+.2/r);i=Math.min(i,e+100663296),i=Math.max(e,i),0<i%65536&&(i+=65536-i%65536);e:{try{Xe.grow(Math.min(2147483648,i)-Je.byteLength+65535>>>16),Et();var s=1;break e}catch{}s=void 0}if(s)return!0}return!1},q:function(e){for(var t=ot();ot()-t<e;);},o:function(e,t){var r=0;return Mt().forEach(function(i,s){var a=t+r;for(s=E[e+4*s>>2]=a,a=0;a<i.length;++a)W[s++>>0]=i.charCodeAt(a);W[s>>0]=0,r+=i.length+1}),0},p:function(e,t){var r=Mt();E[e>>2]=r.length;var i=0;return r.forEach(function(s){i+=s.length+1}),E[t>>2]=i,0},e:function(e){try{var t=oe(e);return n.close(t),0}catch(r){return typeof n<"u"&&r instanceof n.ErrnoError||x(r),r.Oa}},n:function(e,t){try{var r=oe(e),i=r.tty?2:n.isDir(r.mode)?3:n.fb(r.mode)?7:4;return W[t>>0]=i,0}catch(s){return typeof n<"u"&&s instanceof n.ErrnoError||x(s),s.Oa}},G:function(e,t,r,i){try{e:{for(var s=oe(e),a=e=0;a<r;a++){var p=E[t+(8*a+4)>>2],_=n.read(s,W,E[t+8*a>>2],p,void 0);if(0>_){var v=-1;break e}if(e+=_,_<p)break}v=e}return E[i>>2]=v,0}catch(w){return typeof n<"u"&&w instanceof n.ErrnoError||x(w),w.Oa}},l:function(e,t,r,i,s){try{var a=oe(e);return e=4294967296*r+(t>>>0),-9007199254740992>=e||9007199254740992<=e?-61:(n.llseek(a,e,i),Y=[a.position>>>0,(P=a.position,1<=+Math.abs(P)?0<P?(Math.min(+Math.floor(P/4294967296),4294967295)|0)>>>0:~~+Math.ceil((P-+(~~P>>>0))/4294967296)>>>0:0)],E[s>>2]=Y[0],E[s+4>>2]=Y[1],a.Fb&&e===0&&i===0&&(a.Fb=null),0)}catch(p){return typeof n<"u"&&p instanceof n.ErrnoError||x(p),p.Oa}},E:function(e){try{var t=oe(e);return t.stream_ops&&t.stream_ops.fsync?-t.stream_ops.fsync(t):0}catch(r){return typeof n<"u"&&r instanceof n.ErrnoError||x(r),r.Oa}},z:function(e,t,r,i){try{e:{for(var s=oe(e),a=e=0;a<r;a++){var p=n.write(s,W,E[t+8*a>>2],E[t+(8*a+4)>>2],void 0);if(0>p){var _=-1;break e}e+=p}_=e}return E[i>>2]=_,0}catch(v){return typeof n<"u"&&v instanceof n.ErrnoError||x(v),v.Oa}},g:function(e){var t=Date.now();return E[e>>2]=t/1e3|0,E[e+4>>2]=t%1e3*1e3|0,0},K:function(e){var t=Date.now()/1e3|0;return e&&(E[e>>2]=t),t},A:function(e,t){if(t){var r=t+8;t=1e3*E[r>>2],t+=E[r+4>>2]/1e3}else t=Date.now();e=B(e);try{n.ld(e,t,t);var i=0}catch(s){if(!(s instanceof n.ErrnoError)){e:{if(i=Error(),!i.stack){try{throw Error()}catch(a){i=a}if(!i.stack){i="(no stack trace available)";break e}}i=i.stack.toString()}throw o.extraStackTrace&&(i+=`
`+o.extraStackTrace()),i=mr(i),s+" : "+i}i=s.Oa,E[at()>>2]=i,i=-1}return i}};(function(){function e(s){o.asm=s.exports,Xe=o.asm.L,Et(),G=o.asm.Da,kt.unshift(o.asm.M),Te()}function t(s){e(s.instance)}function r(s){return pr().then(function(a){return WebAssembly.instantiate(a,i)}).then(function(a){return a}).then(s,function(a){U("failed to asynchronously prepare wasm: "+a),x(a)})}var i={a:kr};if(et(),o.instantiateWasm)try{return o.instantiateWasm(i,e)}catch(s){return U("Module.instantiateWasm callback failed with error: "+s),!1}return function(){return qe||typeof WebAssembly.instantiateStreaming!="function"||qt()||X.startsWith("file://")||typeof fetch!="function"?r(t):fetch(X,{credentials:"same-origin"}).then(function(s){return WebAssembly.instantiateStreaming(s,i).then(t,function(a){return U("wasm streaming compile failed: "+a),U("falling back to ArrayBuffer instantiation"),r(t)})})}(),{}})(),o.___wasm_call_ctors=function(){return(o.___wasm_call_ctors=o.asm.M).apply(null,arguments)},o._sqlite3_vfs_find=function(){return(o._sqlite3_vfs_find=o.asm.N).apply(null,arguments)},o._sqlite3_free=function(){return(o._sqlite3_free=o.asm.O).apply(null,arguments)};var at=o.___errno_location=function(){return(at=o.___errno_location=o.asm.P).apply(null,arguments)};o._sqlite3_step=function(){return(o._sqlite3_step=o.asm.Q).apply(null,arguments)},o._sqlite3_finalize=function(){return(o._sqlite3_finalize=o.asm.R).apply(null,arguments)},o._sqlite3_prepare_v2=function(){return(o._sqlite3_prepare_v2=o.asm.S).apply(null,arguments)},o._sqlite3_reset=function(){return(o._sqlite3_reset=o.asm.T).apply(null,arguments)},o._sqlite3_clear_bindings=function(){return(o._sqlite3_clear_bindings=o.asm.U).apply(null,arguments)},o._sqlite3_value_blob=function(){return(o._sqlite3_value_blob=o.asm.V).apply(null,arguments)},o._sqlite3_value_text=function(){return(o._sqlite3_value_text=o.asm.W).apply(null,arguments)},o._sqlite3_value_bytes=function(){return(o._sqlite3_value_bytes=o.asm.X).apply(null,arguments)},o._sqlite3_value_double=function(){return(o._sqlite3_value_double=o.asm.Y).apply(null,arguments)},o._sqlite3_value_int=function(){return(o._sqlite3_value_int=o.asm.Z).apply(null,arguments)},o._sqlite3_value_type=function(){return(o._sqlite3_value_type=o.asm._).apply(null,arguments)},o._sqlite3_result_blob=function(){return(o._sqlite3_result_blob=o.asm.$).apply(null,arguments)},o._sqlite3_result_double=function(){return(o._sqlite3_result_double=o.asm.aa).apply(null,arguments)},o._sqlite3_result_error=function(){return(o._sqlite3_result_error=o.asm.ba).apply(null,arguments)},o._sqlite3_result_int=function(){return(o._sqlite3_result_int=o.asm.ca).apply(null,arguments)},o._sqlite3_result_int64=function(){return(o._sqlite3_result_int64=o.asm.da).apply(null,arguments)},o._sqlite3_result_null=function(){return(o._sqlite3_result_null=o.asm.ea).apply(null,arguments)},o._sqlite3_result_text=function(){return(o._sqlite3_result_text=o.asm.fa).apply(null,arguments)},o._sqlite3_column_count=function(){return(o._sqlite3_column_count=o.asm.ga).apply(null,arguments)},o._sqlite3_data_count=function(){return(o._sqlite3_data_count=o.asm.ha).apply(null,arguments)},o._sqlite3_column_blob=function(){return(o._sqlite3_column_blob=o.asm.ia).apply(null,arguments)},o._sqlite3_column_bytes=function(){return(o._sqlite3_column_bytes=o.asm.ja).apply(null,arguments)},o._sqlite3_column_double=function(){return(o._sqlite3_column_double=o.asm.ka).apply(null,arguments)},o._sqlite3_column_text=function(){return(o._sqlite3_column_text=o.asm.la).apply(null,arguments)},o._sqlite3_column_type=function(){return(o._sqlite3_column_type=o.asm.ma).apply(null,arguments)},o._sqlite3_column_name=function(){return(o._sqlite3_column_name=o.asm.na).apply(null,arguments)},o._sqlite3_bind_blob=function(){return(o._sqlite3_bind_blob=o.asm.oa).apply(null,arguments)},o._sqlite3_bind_double=function(){return(o._sqlite3_bind_double=o.asm.pa).apply(null,arguments)},o._sqlite3_bind_int=function(){return(o._sqlite3_bind_int=o.asm.qa).apply(null,arguments)},o._sqlite3_bind_text=function(){return(o._sqlite3_bind_text=o.asm.ra).apply(null,arguments)},o._sqlite3_bind_parameter_index=function(){return(o._sqlite3_bind_parameter_index=o.asm.sa).apply(null,arguments)},o._sqlite3_sql=function(){return(o._sqlite3_sql=o.asm.ta).apply(null,arguments)},o._sqlite3_normalized_sql=function(){return(o._sqlite3_normalized_sql=o.asm.ua).apply(null,arguments)},o._sqlite3_errmsg=function(){return(o._sqlite3_errmsg=o.asm.va).apply(null,arguments)},o._sqlite3_exec=function(){return(o._sqlite3_exec=o.asm.wa).apply(null,arguments)},o._sqlite3_changes=function(){return(o._sqlite3_changes=o.asm.xa).apply(null,arguments)},o._sqlite3_close_v2=function(){return(o._sqlite3_close_v2=o.asm.ya).apply(null,arguments)},o._sqlite3_create_function_v2=function(){return(o._sqlite3_create_function_v2=o.asm.za).apply(null,arguments)},o._sqlite3_open=function(){return(o._sqlite3_open=o.asm.Aa).apply(null,arguments)};var Ie=o._malloc=function(){return(Ie=o._malloc=o.asm.Ba).apply(null,arguments)},Ne=o._free=function(){return(Ne=o._free=o.asm.Ca).apply(null,arguments)};o._RegisterExtensionFunctions=function(){return(o._RegisterExtensionFunctions=o.asm.Ea).apply(null,arguments)},o._register_for_idb=function(){return(o._register_for_idb=o.asm.Fa).apply(null,arguments)};var ke=o.__get_tzname=function(){return(ke=o.__get_tzname=o.asm.Ga).apply(null,arguments)},zt=o.__get_daylight=function(){return(zt=o.__get_daylight=o.asm.Ha).apply(null,arguments)},Tt=o.__get_timezone=function(){return(Tt=o.__get_timezone=o.asm.Ia).apply(null,arguments)},Fe=o.stackSave=function(){return(Fe=o.stackSave=o.asm.Ja).apply(null,arguments)},xe=o.stackRestore=function(){return(xe=o.stackRestore=o.asm.Ka).apply(null,arguments)},se=o.stackAlloc=function(){return(se=o.stackAlloc=o.asm.La).apply(null,arguments)},Lt=o._memalign=function(){return(Lt=o._memalign=o.asm.Ma).apply(null,arguments)};o.cwrap=function(e,t,r,i){r=r||[];var s=r.every(function(a){return a==="number"});return t!=="string"&&s&&!i?wt(e):function(){return dr(e,t,r,arguments)}},o.UTF8ToString=B,o.FS=n,o.stackSave=Fe,o.stackRestore=xe,o.stackAlloc=se;var je;De=function e(){je||ut(),je||(De=e)};function ut(){function e(){if(!je&&(je=!0,o.calledRun=!0,!_t)){if(o.noFSInit||n.jb.Hb||n.jb(),n.kc=!1,tt(kt),o.onRuntimeInitialized&&o.onRuntimeInitialized(),o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;){var t=o.postRun.shift();St.unshift(t)}tt(St)}}if(!(0<de)){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)hr();tt(vt),0<de||(o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),e()},1)):e())}}if(o.run=ut,o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();return ut(),o}),c)};y.exports=u,y.exports.default=u})(Ct);var Qt=$e;const ct={EPERM:63,ENOENT:44};class Ht{constructor(l,c){this.FS=l,this.backend=c,this.node_ops={getattr:u=>{let f=l.isFile(u.mode)?u.contents.getattr():null,h={};return h.dev=1,h.ino=u.id,h.mode=f?f.mode:u.mode,h.nlink=1,h.uid=0,h.gid=0,h.rdev=u.rdev,h.size=f?f.size:l.isDir(u.mode)?4096:0,h.atime=new Date(0),h.mtime=new Date(0),h.ctime=new Date(0),h.blksize=f?f.blockSize:4096,h.blocks=Math.ceil(h.size/h.blksize),h},setattr:(u,f)=>{this.FS.isFile(u.mode)?u.contents.setattr(f):(f.mode!=null&&(u.mode=f.mode),f.size!=null&&(u.size=f.size))},lookup:(u,f)=>{throw new this.FS.ErrnoError(ct.ENOENT)},mknod:(u,f,h,m)=>{if(f.endsWith(".lock"))throw new Error("Locking via lockfiles is not supported");return this.createNode(u,f,h,m)},rename:(u,f,h)=>{throw new Error("rename not implemented")},unlink:(u,f)=>{this.FS.lookupNode(u,f).contents.delete(f)},readdir:u=>{throw new Error("readdir not implemented")},symlink:(u,f,h)=>{throw new Error("symlink not implemented")},readlink:u=>{throw new Error("symlink not implemented")}},this.stream_ops={open:u=>{this.FS.isFile(u.node.mode)&&u.node.contents.open()},close:u=>{this.FS.isFile(u.node.mode)&&u.node.contents.close()},read:(u,f,h,m,g)=>u.node.contents.read(f,h,m,g),write:(u,f,h,m,g)=>u.node.contents.write(f,h,m,g),llseek:(u,f,h)=>{var m=f;if(h===1?m+=u.position:h===2&&l.isFile(u.node.mode)&&(m+=u.node.contents.getattr().size),m<0)throw new this.FS.ErrnoError(28);return m},allocate:(u,f,h)=>{u.node.contents.setattr({size:f+h})},mmap:(u,f,h,m,g,o)=>{throw new Error("mmap not implemented")},msync:(u,f,h,m,g)=>{throw new Error("msync not implemented")},fsync:(u,f,h,m,g)=>{u.node.contents.fsync()}}}mount(){return this.createNode(null,"/",16895,0)}lock(l,c){let{node:u}=this.FS.lookupPath(l);return u.contents.lock(c)}unlock(l,c){let{node:u}=this.FS.lookupPath(l);return u.contents.unlock(c)}createNode(l,c,u,f){if(!(this.FS.isDir(u)||this.FS.isFile(u)))throw new this.FS.ErrnoError(ct.EPERM);var h=this.FS.createNode(l,c,u,f);return this.FS.isDir(h.mode)?(h.node_ops={mknod:this.node_ops.mknod,lookup:this.node_ops.lookup,unlink:this.node_ops.unlink,setattr:this.node_ops.setattr},h.stream_ops={},h.contents={}):this.FS.isFile(h.mode)&&(h.node_ops=this.node_ops,h.stream_ops=this.stream_ops,h.contents=this.backend.createFile(c)),l&&(l.contents[c]=h,l.timestamp=h.timestamp),h}}const Xt=Ht;let Re={NONE:0,SHARED:1,RESERVED:2,PENDING:3,EXCLUSIVE:4};function Ve(y){let l=y[16],c=y[17];return(l<<8)+c}function Yt(y,l){if(y!=null&&l!=null){let c=new Uint8Array(y),u=new Uint8Array(l);for(let f=24;f<40;f++)if(c[f]!==u[f])return!1;return!0}return y==null&&l==null}function Zt(y,l,c){let u=[];for(let f=y;f<=l;f+=c)u.push(f);return u}function dt(y,l,c){let u=l-l%y,f=c-1-(c-1)%y;return Zt(u,f,y)}function Jt(y,l,c){let u=new ArrayBuffer(c-l),f=new Uint8Array(u);for(let h=0;h<y.length;h++){let m=y[h];if(m.data.constructor.name!=="ArrayBuffer")throw new Error("Chunk data is not an ArrayBuffer");let g=0,o=m.data.byteLength;if(l>m.pos&&(g=l-m.pos),c<m.pos+m.data.byteLength&&(o=c-m.pos),g>m.data.byteLength||o<0)continue;let k=o-g;f.set(new Uint8Array(m.data,g,k),m.pos-l+g)}return u}function ht(y,l,c,u){let f=dt(l,c,u),h=0;return f.map(m=>{let g=0,o=l;c>m&&c<m+l&&(g=c-m),u>m&&u<m+l&&(o=u-m);let k=o-g,A=new ArrayBuffer(l);if(c>m+l||u<=m)return null;let q=y.byteOffset+h,M=y.buffer.byteLength-q;if(M<=0)return null;let L=Math.min(k,M);return new Uint8Array(A).set(new Uint8Array(y.buffer,q,L),g),h+=L,{pos:m,data:A,offset:g,length:L}}).filter(Boolean)}class Gt{constructor(l,c,u=null){this.filename=l,this.buffer=new Map,this.ops=c,this.meta=u,this._metaDirty=!1,this.writeLock=!1}bufferChunks(l){for(let c=0;c<l.length;c++){let u=l[c];this.buffer.set(u.pos,u)}}open(){this.ops.open();let l=this.ops.readMeta();return this.meta==null&&(l==null&&(l={size:0}),this.meta=l),l}close(){this.fsync(),this.ops.close()}delete(){this.ops.delete()}load(l){let c=l.reduce((f,h)=>{let m=this.buffer.get(h);return m?f.chunks.push(m):f.missing.push(h),f},{chunks:[],missing:[]}),u=[];return c.missing.length>0&&(u=this.ops.readBlocks(c.missing,this.meta.blockSize)),c.chunks.concat(u)}read(l,c,u,f){let h=l.buffer;if(u<=0||f<0)return 0;if(f>=this.meta.size){let L=new Uint8Array(h,c);for(let ee=0;ee<u;ee++)L[ee]=0;return u}f=Math.max(f,0);let m=Math.min(u,this.meta.size-f),g=f,o=f+m,k=dt(this.meta.blockSize,g,o),A=this.load(k),q=Jt(A,g,o);if(h.byteLength-c<q.byteLength)throw new Error("Buffer given to `read` is too small");let M=new Uint8Array(h);M.set(new Uint8Array(q),c);for(let L=m;L<u;L++)M[c+L]=0;return u}write(l,c,u,f){if(this.meta.blockSize==null){let q=Ve(new Uint8Array(l.buffer,l.byteOffset+c));if(![512,1024,2048,4096,8192,16384,32768,65536].includes(q))throw new Error("File has invalid page size. (the first block of a new file must be written first)");this.setattr({blockSize:q})}let h=l.buffer;if(u<=0||f<0||h.byteLength===0)return 0;u=Math.min(u,h.byteLength-c);let m=ht(new Uint8Array(h,c,u),this.meta.blockSize,f,f+u),{partialWrites:g,fullWrites:o}=m.reduce((q,M)=>(M.length!==this.meta.blockSize?q.partialWrites.push(M):q.fullWrites.push({pos:M.pos,data:M.data}),q),{fullWrites:[],partialWrites:[]}),k=[];g.length>0&&(k=this.load(g.map(q=>q.pos)));let A=o.concat(k.map(q=>{let M=g.find(L=>L.pos===q.pos);return new Uint8Array(q.data).set(new Uint8Array(M.data,M.offset,M.length),M.offset,M.length),q}));return this.bufferChunks(A),f+u>this.meta.size&&this.setattr({size:f+u}),u}async readIfFallback(){if(this.ops.readIfFallback){let l=await this.ops.readIfFallback();this.meta=l||{size:0}}}lock(l){return this._recordingLock||(this._recordingLock=!0),this.ops.lock(l)?(l>=Re.RESERVED&&(this.writeLock=!0),!0):!1}unlock(l){return l===0&&(this._recordingLock=!1),this.writeLock&&(this.fsync(),this.writeLock=!1),this.ops.unlock(l)}fsync(){if(this.buffer.size>0){let l=this.buffer.get(0);if(l){let c=Ve(new Uint8Array(l.data));if(c!==this.meta.blockSize){let u=this.buffer;this.buffer=new Map;let f=[...u.values()],h=f.length*this.meta.blockSize,m=new ArrayBuffer(h),g=new Uint8Array(m);for(let o of f)g.set(new Uint8Array(o.data),o.pos);this.bufferChunks(ht(g,c,0,h)),this.setattr({blockSize:c})}}this.ops.writeBlocks([...this.buffer.values()],this.meta.blockSize)}this._metaDirty&&(this.ops.writeMeta({size:this.meta.size}),this._metaDirty=!1),this.buffer=new Map}setattr(l){this.meta==null&&(this.meta={}),l.mode!==void 0&&(this.meta.mode=l.mode),l.blockSize!==void 0&&(this.meta.blockSize=l.blockSize),l.size!==void 0&&(this.meta.size=l.size,this._metaDirty=!0)}getattr(){return this.meta}}let pt=3735928559,K=0,ae=1;class Kt{constructor(l,{initialOffset:c=4,useAtomics:u=!0,stream:f=!0,debug:h,name:m}={}){this.buffer=l,this.atomicView=new Int32Array(l),this.offset=c,this.useAtomics=u,this.stream=f,this.debug=h,this.name=m}log(...l){this.debug&&console.log(`[reader: ${this.name}]`,...l)}waitWrite(l,c=null){if(this.useAtomics){for(this.log(`waiting for ${l}`);Atomics.load(this.atomicView,0)===K;){if(c!=null&&Atomics.wait(this.atomicView,0,K,c)==="timed-out")throw new Error("timeout");Atomics.wait(this.atomicView,0,K,500)}this.log(`resumed for ${l}`)}else if(this.atomicView[0]!==ae)throw new Error("`waitWrite` expected array to be readable")}flip(){if(this.log("flip"),this.useAtomics){if(Atomics.compareExchange(this.atomicView,0,ae,K)!==ae)throw new Error("Read data out of sync! This is disastrous");Atomics.notify(this.atomicView,0)}else this.atomicView[0]=K;this.offset=4}done(){this.waitWrite("done");let c=new DataView(this.buffer,this.offset).getUint32(0)===pt;return c&&(this.log("done"),this.flip()),c}peek(l){this.peekOffset=this.offset;let c=l();return this.offset=this.peekOffset,this.peekOffset=null,c}string(l){this.waitWrite("string",l);let c=this._int32(),u=c/2,f=new DataView(this.buffer,this.offset,c),h=[];for(let g=0;g<u;g++)h.push(f.getUint16(g*2));let m=String.fromCharCode.apply(null,h);return this.log("string",m),this.offset+=c,this.peekOffset==null&&this.flip(),m}_int32(){let l=4,u=new DataView(this.buffer,this.offset).getInt32();return this.log("_int32",u),this.offset+=l,u}int32(){this.waitWrite("int32");let l=this._int32();return this.log("int32",l),this.peekOffset==null&&this.flip(),l}bytes(){this.waitWrite("bytes");let l=this._int32(),c=new ArrayBuffer(l);return new Uint8Array(c).set(new Uint8Array(this.buffer,this.offset,l)),this.log("bytes",c),this.offset+=l,this.peekOffset==null&&this.flip(),c}}class er{constructor(l,{initialOffset:c=4,useAtomics:u=!0,stream:f=!0,debug:h,name:m}={}){this.buffer=l,this.atomicView=new Int32Array(l),this.offset=c,this.useAtomics=u,this.stream=f,this.debug=h,this.name=m,this.useAtomics?Atomics.store(this.atomicView,0,K):this.atomicView[0]=K}log(...l){this.debug&&console.log(`[writer: ${this.name}]`,...l)}waitRead(l){if(this.useAtomics){if(this.log(`waiting for ${l}`),Atomics.compareExchange(this.atomicView,0,K,ae)!==K)throw new Error("Wrote something into unwritable buffer! This is disastrous");for(Atomics.notify(this.atomicView,0);Atomics.load(this.atomicView,0)===ae;)Atomics.wait(this.atomicView,0,ae,500);this.log(`resumed for ${l}`)}else this.atomicView[0]=ae;this.offset=4}finalize(){this.log("finalizing"),new DataView(this.buffer,this.offset).setUint32(0,pt),this.waitRead("finalize")}string(l){this.log("string",l);let c=l.length*2;this._int32(c);let u=new DataView(this.buffer,this.offset,c);for(let f=0;f<l.length;f++)u.setUint16(f*2,l.charCodeAt(f));this.offset+=c,this.waitRead("string")}_int32(l){let c=4;new DataView(this.buffer,this.offset).setInt32(0,l),this.offset+=c}int32(l){this.log("int32",l),this._int32(l),this.waitRead("int32")}bytes(l){this.log("bytes",l);let c=l.byteLength;this._int32(c),new Uint8Array(this.buffer,this.offset).set(new Uint8Array(l)),this.offset+=c,this.waitRead("bytes")}}function mt(y,l){return Math.round(y/l)}function tr(y,l){self.postMessage({type:"__absurd:spawn-idb-worker",argBuffer:l.buffer,resultBuffer:y.buffer}),self.addEventListener("message",c=>{switch(c.data.type){case"__perf-deets:start-profile":l.string("profile-start"),l.finalize(),y.int32(),y.done();break;case"__perf-deets:stop-profile":l.string("profile-stop"),l.finalize(),y.int32(),y.done();break}})}class rr{constructor(l){this.filename=l}getStoreName(){return this.filename.replace(/\//g,"-")}invokeWorker(l,c){if(this.reader==null||this.writer==null)throw new Error(`Attempted ${l} on ${this.filename} but file not open`);let u=this.reader,f=this.writer;switch(l){case"readBlocks":{let{name:h,positions:m,blockSize:g}=c,o=[];for(let k of m){f.string("readBlock"),f.string(h),f.int32(mt(k,g)),f.finalize();let A=u.bytes();u.done(),o.push({pos:k,data:A.byteLength===0?new ArrayBuffer(g):A})}return o}case"writeBlocks":{let{name:h,writes:m,blockSize:g}=c;f.string("writeBlocks"),f.string(h);for(let k of m)f.int32(mt(k.pos,g)),f.bytes(k.data);f.finalize();let o=u.int32();return u.done(),o}case"readMeta":{f.string("readMeta"),f.string(c.name),f.finalize();let h=u.int32(),m=u.int32();return u.done(),h===-1?null:{size:h,blockSize:m}}case"writeMeta":{let{name:h,meta:m}=c;f.string("writeMeta"),f.string(h),f.int32(m.size),f.finalize();let g=u.int32();return u.done(),g}case"closeFile":{f.string("closeFile"),f.string(c.name),f.finalize();let h=u.int32();return u.done(),h}case"lockFile":{f.string("lockFile"),f.string(c.name),f.int32(c.lockType),f.finalize();let h=u.int32();return u.done(),h===0}case"unlockFile":{f.string("unlockFile"),f.string(c.name),f.int32(c.lockType),f.finalize();let h=u.int32();return u.done(),h===0}}}lock(l){return this.invokeWorker("lockFile",{name:this.getStoreName(),lockType:l})}unlock(l){return this.invokeWorker("unlockFile",{name:this.getStoreName(),lockType:l})}delete(){(this.reader||this.writer)&&this.close();let l=globalThis.indexedDB.deleteDatabase(this.getStoreName());l.onerror=()=>{console.warn(`Deleting ${this.filename} database failed`)},l.onsuccess=()=>{}}open(){let l=new SharedArrayBuffer(36864);this.writer=new er(l,{name:"args (backend)",debug:!1});let c=new SharedArrayBuffer(4096*9);this.reader=new Kt(c,{name:"results",debug:!1}),tr(this.reader,this.writer)}close(){this.invokeWorker("closeFile",{name:this.getStoreName()}),this.reader=null,this.writer=null,this.worker=null}readMeta(){return this.invokeWorker("readMeta",{name:this.getStoreName()})}writeMeta(l){return this.invokeWorker("writeMeta",{name:this.getStoreName(),meta:l})}readBlocks(l,c){return this.stats&&(this.stats.read+=l.length),this.invokeWorker("readBlocks",{name:this.getStoreName(),positions:l,blockSize:c})}writeBlocks(l,c){return this.stats&&(this.stats.writes+=l.length),this.invokeWorker("writeBlocks",{name:this.getStoreName(),writes:l,blockSize:c})}}function gt(y,l){return Math.round(y/l)}async function nr(y){return new Promise((l,c)=>{let u=globalThis.indexedDB.open(y,1);u.onsuccess=f=>{let h=f.target.result;h.onversionchange=()=>{console.log("closing because version changed"),h.close()},h.onclose=()=>{},l(h)},u.onupgradeneeded=f=>{let h=f.target.result;h.objectStoreNames.contains("data")||h.createObjectStore("data")},u.onblocked=f=>console.log("blocked",f),u.onerror=u.onabort=f=>c(f.target.error)})}class ir{constructor(l){this.filename=l,this.dbName=this.filename.replace(/\//g,"-"),this.cachedFirstBlock=null,this.blocks=new Map,this.writeQueue=[],this.lockType=0}async getDb(){return this._openDb?this._openDb:(this._openDb=await nr(this.dbName),this._openDb)}closeDb(){this._openDb&&(this._openDb.close(),this._openDb=null)}async readIfFallback(){if(this.blocks.size>0)return;let u=(await this.getDb(this.dbName)).transaction(["data"],"readonly").objectStore("data");return new Promise((f,h)=>{let m=u.openCursor(IDBKeyRange.lowerBound(-1));m.onerror=h,m.onsuccess=g=>{let o=g.target.result;o?(this.blocks.set(o.key,o.value),o.continue()):f(this.readMeta())}})}queueWrite(l,c){this.writeQueue.push({key:l,value:c})}prepareFlush(){let l={cachedFirstBlock:this.cachedFirstBlock,writes:this.writeQueue,lockType:this.lockType};return this.writeQueue=[],l}async flushWriteState(l,c){let u=l.transaction(["data"],"readwrite"),f=u.objectStore("data");await new Promise((h,m)=>{let g=f.get(0);g.onsuccess=o=>{if(c.lockType>Re.NONE&&!Yt(g.result,c.cachedFirstBlock)){console.log("OH NO WE CAN'T WRITE"),m("screwed");return}for(let k of c.writes)f.put(k.value,k.key);u.onsuccess=()=>{h()},u.onerror=()=>{console.log("Flushing writes failed"),m()}},g.onerror=m})}lock(l){return this.cachedFirstBlock=this.blocks.get(0),this.lockType=l,!0}unlock(l){if(this.lockType>Re.SHARED&&l===Re.SHARED){let c=this.prepareFlush();this.getDb(this.dbName).then(u=>this.flushWriteState(u,c))}return this.lockType=l,!0}delete(){let l=globalThis.indexedDB.deleteDatabase(this.dbName);l.onerror=()=>{console.warn(`Deleting ${this.filename} database failed`)},l.onsuccess=()=>{}}open(){}close(){if(this._openDb){let l=this._openDb;this._openDb=null;let c=this.prepareFlush();this.flushWriteState(l,c).then(()=>{l.close()})}}readMeta(){let l=this.blocks.get(-1);if(l){let c=this.blocks.get(0);return{size:l.size,blockSize:Ve(new Uint8Array(c))}}return null}writeMeta(l){this.blocks.set(-1,l),this.queueWrite(-1,l)}readBlocks(l,c){if(this.blocks==null)throw new Error("File was opened, but not read yet. This environment doesn't support SharedArrayWorker, so you must use `readIfFallback` to read the whole file into memory first");let u=[];for(let f of l)u.push({pos:f,data:this.blocks.get(gt(f,c))});return u}writeBlocks(l,c){for(let u of l){let f=gt(u.pos,c);this.blocks.set(f,u.data),this.queueWrite(f,u.data)}}}class or{createFile(l){let c;typeof SharedArrayBuffer<"u"?c=new rr(l):c=new ir(l);let u=new Gt(l,c);return{}.PERF_BUILD&&(this._files==null&&(this._files=new Set),this._files.add(u)),u}startProfile(){for(let l of this._files)if(l.ops.writer){let c=l.ops.writer,u=l.ops.reader;c.string("profile-start"),c.finalize(),u.int32(),u.done()}}stopProfile(){for(let l of this._files)if(l.ops.writer){let c=l.ops.writer,u=l.ops.reader;c.string("profile-stop"),c.finalize(),u.int32(),u.done()}}}function sr(y){return!!y&&(typeof y=="object"||typeof y=="function")&&typeof y.then=="function"}function lr(y){function l(h,m,g,o){function k(A){typeof self.postMessage!="function"?h.ports[0].postMessage(A):self.postMessage(A)}g?(typeof console<"u"&&"error"in console&&console.error("Worker caught an error:",g),k([m,{message:g.message}])):k([m,null,o])}function c(h,m){try{return{res:h(m)}}catch(g){return{err:g}}}function u(h,m,g,o){var k=c(m,o);k.err?l(h,g,k.err):sr(k.res)?k.res.then(function(A){l(h,g,null,A)},function(A){l(h,g,A)}):l(h,g,null,k.res)}function f(h){var m=h.data;if(!(!Array.isArray(m)||m.length!==2)){var g=m[0],o=m[1];typeof y!="function"?l(h,g,new Error("Please pass a function into register().")):u(h,y,g,o)}}self.addEventListener("message",f)}var ar=lr;async function ur(){console.log("yo");let y;y=await Qt({locateFile:m=>`/itm-dev/assets/${m}`});let l=new Xt(y.FS,new or);y.register_for_idb(l),y.FS.mkdir("/sql"),y.FS.mount(l,{},"/sql");const c="/sql/sign.sqlite";if(typeof SharedArrayBuffer>"u"){let m=y.FS.open(c,"a+");await m.node.contents.readIfFallback(),y.FS.close(m)}let u=new y.Database(c,{filename:!0});u.exec(`
  PRAGMA journal_mode=MEMORY;
  `);function f(m){return m.flatMap(g=>g.values.map(o=>{const k={};for(let A=0;A<g.columns.length;A++)k[g.columns[A]]=o[A];return k}))}u.query=(...m)=>f(u.exec(...m));let h=!1;try{console.log("try"),u.exec("select * from sign_fts limit 5")}catch{console.log("except"),h=!0}if(h){let m="/itm-dev/";const g=[`${m}assets/sign_tables.txt`,`${m}assets/sign_db_data.txt`,`${m}assets/signftstableftsdata.txt`];for(let o of g)if(o.includes("db_data"))for await(let k of fr(o))try{u.exec(k)}catch(A){console.error(A)}else for await(let k of cr(o))try{u.exec(k)}catch(A){console.error(A)}u.exec('INSERT INTO user(name, id) VALUES("default_user",3);'),u.exec('INSERT INTO collection(id,user_id,name) VALUES(3,3,"default_collection");')}ar(async function(m){let g,o,k,A,q;q=m.query,typeof q=="string"&&(q=m.query.trim()),k=m.signOffset||0,A=m.signLimit||500;const M=m.collectionId??3;switch(m.type){case"signSearch":return console.log("signsearch"),q||(g=`select sign.id as sign_id,
                        sign.phrase as phrase,
                        sign_video.video_id as youtube_id,
                        sign_fts.related_signs as related_signs,
                        CASE WHEN sign_collection.collection_id = ${M} THEN true ELSE false END as is_in_collection
                        from sign
                        join sign_fts
                        on sign.id = sign_fts.id
                        LEFT JOIN sign_collection
                        ON sign_collection.sign_id = sign.id
                        LEFT JOIN sign_video
                        ON sign.id = sign_video.sign_id
                        group by sign.id
                        order by phrase asc
                        limit ${A}
                        offset ${k}`),q[0]==="*"&&(g=`select sign.id as sign_id,
                        sign.phrase as phrase,
                        sign_video.video_id as youtube_id,
                        sign_fts.related_signs as related_signs,
                        CASE WHEN sign_collection.collection_id = ${M} THEN true ELSE false END as is_in_collection
                        from sign
                        join sign_fts
                        on sign.id = sign_fts.id
                        LEFT JOIN sign_collection
                        ON sign_collection.sign_id = sign.id
                        LEFT JOIN sign_video
                        ON sign.id = sign_video.sign_id
                        where sign.phrase like "%${q.substring(1)}%"
                        group by sign.id
                        order by sign.phrase asc
                        limit ${A}
                        offset ${k}`),q&&q[0]!="*"&&(q[q.length-1]!="*"&&(q=q+"*"),g=`select sign.id as sign_id,
                        sign.phrase as phrase,
                        sign_video.video_id as youtube_id,
                        sign_fts.related_signs as related_signs,
                        CASE WHEN sign_collection.collection_id = ${M} THEN true ELSE false END as is_in_collection
                        from sign_fts
                        join sign on sign.id = sign_fts.id
                        LEFT JOIN sign_collection
                        ON sign_collection.sign_id = sign.id
                        LEFT JOIN sign_video
                        ON sign.id = sign_video.sign_id
                        where sign_fts match "${q}"
                        group by sign.id
                        order by sign_fts.rank, sign.phrase asc
                        limit ${A}
                        offset ${k}`),u.query(g);case"sql":return u.query(q);case"listCollections":return g=`select collection.id as id,
                          user.id as user_id,
                          collection.name as name,
                          user.name as user_name 
                          from collection
                          join user
                          on collection.user_id = user.id`,u.query(g);case"getDefaultUserCollection":for(g=u.prepare("SELECT * from sign where sign.id in (select sign_collection.sign_id from sign_collection where sign_collection.collection_id = 3)"),o=[];g.step();)o.push(g.getAsObject());return console.log(o),o;case"addToDefaultUserCollection":u.exec(`INSERT INTO sign_collection(sign_id,collection_id) VALUES(${q},3)`),console.log(q);case"getCollectionById":return console.log("getCollectionById"),q||(g=`select sign.id as sign_id,
                        sign.phrase as phrase,
                        sign_video.video_id as youtube_id,
                        sign_fts.related_signs as related_signs,
                        collection.id as collection_id,
                        collection.name as collection_name
                        from sign
                        join sign_fts
                        on sign.id = sign_fts.id
                        left join sign_collection
                        on sign.id = sign_collection.sign_id
                        left join collection
                        on collection.id = sign_collection.collection_id
                        LEFT JOIN sign_video
                        ON sign.id = sign_video.sign_id
                        where collection.id = ${M}
                        order by sign.phrase asc
                        limit ${A}
                        offset ${k}`),q[0]==="*"&&(g=`select sign.id as sign_id,
                        sign.phrase as phrase,
                        sign_video.video_id as youtube_id,
                        sign_fts.related_signs as related_signs,
                        collection.id as collection_id,
                        collection.name as collection_name
                        from sign
                        join sign_fts
                        on sign.id = sign_fts.id
                        left join sign_collection
                        on sign.id = sign_collection.sign_id
                        left join collection
                        on collection.id = sign_collection.collection_id
                        LEFT JOIN sign_video
                        ON sign.id = sign_video.sign_id
                        where sign.phrase like "%${q.substring(1)}%"
                        and collection.id = ${M}
                        order by sign.phrase asc
                        limit ${A}
                        offset ${k}`),q&&q[0]!="*"&&(q[q.length-1]!="*"&&(q=q+"*"),g=`select sign.id as sign_id,
                        sign.phrase as phrase,
                        sign_video.video_id as youtube_id,
                        sign_fts.related_signs as related_signs,
                        collection.id as collection_id,
                        collection.name as collection_name
                        from sign_fts
                        join sign on sign.id = sign_fts.id
                        left join sign_collection
                        on sign.id = sign_collection.sign_id
                        left join collection
                        on collection.id = sign_collection.collection_id
                        LEFT JOIN sign_video
                        ON sign.id = sign_video.sign_id
                        where sign_fts match "${q}"
                        and collection.id = ${M}
                        order by sign_fts.rank, sign.phrase asc
                        limit ${A}
                        offset ${k}`),u.query(g);case"signSearchWithCollectionId":return console.log("signSearchWithCollectionId"),q||(g=`
                        select distinct
                        sign.id as sign_id,
                        sign.phrase as phrase,
                        sign_video.video_id as youtube_id,
                        sign_fts.related_signs as related_signs,
                            case when sign_collection.collection_id is not null then true else false end as in_collection
                        from sign
                        join sign_fts
                        on sign.id = sign_fts.id
                        left join sign_collection
                        on sign.id = sign_collection.sign_id
                        and sign_collection.collection_id = ${M}
                        LEFT JOIN sign_video
                        ON sign.id = sign_video.sign_id
                        order by sign.phrase asc
                        limit ${A}
                        offset ${k}`),u.query(g);case"checkSignInCollection":const{sign_id:ue,collection_id:we}=q;return!!u.query(`
                select case when exists
                    (select *
                    from sign_collection
                    where sign_id = ${ue}
                    and collection_id = ${we}
                    )
                    then true
                    else false
                    end
                    as in_collection;
                `)[0].in_collection}})}ur();async function*fr(y){const l=new TextDecoder("utf-8");let u=(await fetch(y)).body.getReader(),{value:f,done:h}=await u.read();f=f?l.decode(f,{stream:!0}):"";let m=/\r\n|\n|\r/gm,g=0;for(;;){let o=m.exec(f);if(!o){if(h)break;let k=f.substr(g);({value:f,done:h}=await u.read()),f=k+(f?l.decode(f,{stream:!0}):""),g=m.lastIndex=0;continue}yield f.substring(g,o.index),g=m.lastIndex}g<f.length&&(yield f.substr(g))}async function*cr(y){const l=new TextDecoder("utf-8");let u=(await fetch(y)).body.getReader(),{value:f,done:h}=await u.read();f=f?l.decode(f,{stream:!0}):"";let m=/;/gm,g=0;for(;;){let o=m.exec(f);if(!o){if(h)break;let k=f.substr(g);({value:f,done:h}=await u.read()),f=k+(f?l.decode(f,{stream:!0}):""),g=m.lastIndex=0;continue}yield f.substring(g,o.index),g=m.lastIndex}g<f.length&&(yield f.substr(g))}})();
